{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"Studio\"","webpack:///external \"Studio.libraries['react']\"","webpack:///./studio/VersionControl.css","webpack:///./studio/ChangesTable.js","webpack:///./studio/main_dev.js","webpack:///./studio/HistoryEditor.js","webpack:///./studio/DownloadBigFileModal.js","webpack:///external \"Studio.libraries['filesaver.js-npm']\"","webpack:///./studio/LocalChangesEditor.js"],"names":["openDiff","change","type","Studio","openModal","DownloadBigFileModal","previewId","preview","data","api","post","parseJSON","patch","response","updatePreview","content","completed","stack","operationIcon","operation","renderChange","c","entitySet","path","textAlign","changes","width","map","Popup","initializeListeners","push","authentication","user","isAdmin","addEditorComponent","HistoryEditor","LocalChangesEditor","VCToolbar","props","state","expandedMenu","handleVCMenuTrigger","bind","vcMenuTriggerRef","React","createRef","vcMenuContainerRef","e","stopPropagation","openTab","key","editorComponentKey","title","current","contains","target","setState","prevState","openLocalChanges","style","runCaret","top","undefined","right","itemProps","open","openHistory","closeMenu","Component","addToolbarComponent","history","inExecution","load","fetchRequested","get","res","alert","id","localChanges","length","error","confirm","_id","reset","catch","console","commit","diff","message","date","toLocaleString","checkout","color","marginTop","display","marginBottom","listContainer","h","selectCommit","renderCommit","b64toBlob","b64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","offset","slice","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","blob","Blob","options","contentMimeType","nameParts","name","split","nameExtension","filename","contentFileExtension","fileSaver","saveAs","download","close","renderDownload","renderEmpty","event","value","revert"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","module.exports = Studio;","module.exports = Studio.libraries['react'];","// extracted by mini-css-extract-plugin\nmodule.exports = {\"runCaret\":\"x-version-control-VersionControl-runCaret\",\"listContainer\":\"x-version-control-VersionControl-listContainer\"};","import Studio from 'jsreport-studio'\nimport DownloadBigFileModal from './DownloadBigFileModal'\n\nconst openDiff = async (change) => {\n  if (change.type === 'bigfile') {\n    return Studio.openModal(DownloadBigFileModal, {\n      change\n    })\n  }\n\n  const previewId = Studio.preview({\n    type: 'rawContent',\n    data: {}\n  })\n\n  try {\n    const response = await Studio.api.post('/studio/diff-html', {\n      parseJSON: false,\n      data: {\n        patch: change.patch\n      }\n    })\n\n    Studio.updatePreview(previewId, {\n      type: 'rawContent',\n      data: {\n        type: 'text/html',\n        content: response\n      },\n      completed: true\n    })\n  } catch (err) {\n    Studio.updatePreview(previewId, {\n      type: 'rawContent',\n      data: {\n        type: 'text/html',\n        content: err.stack\n      },\n      completed: true\n    })\n  }\n}\n\nconst operationIcon = (operation) => {\n  switch (operation) {\n    case 'insert': return 'fa fa-plus'\n    case 'remove': return 'fa fa-eraser'\n    case 'update': return 'fa fa-pencil'\n  }\n}\n\nconst renderChange = (c) => {\n  return (\n    <tbody key={`${c.entitySet}-${c.path}`}>\n      <tr onClick={() => openDiff(c)}>\n        <td style={{ textAlign: 'center' }}><i className={operationIcon(c.operation)} /></td>\n        <td>{c.path}</td>\n        <td>{c.entitySet}</td>\n      </tr>\n    </tbody>\n  )\n}\n\nexport default ({ changes }) => (\n  <table className='table'>\n    <thead>\n      <tr>\n        <th style={{ width: '20px' }}>operation</th>\n        <th>path</th>\n        <th>entity set</th>\n      </tr>\n    </thead>\n    {changes.map((c) => renderChange(c))}\n  </table>\n)\n","import Studio from 'jsreport-studio'\nimport React, { Component } from 'react'\nimport HistoryEditor from './HistoryEditor'\nimport LocalChangesEditor from './LocalChangesEditor'\nimport style from './VersionControl.css'\n\nconst Popup = Studio.Popup\n\nStudio.initializeListeners.push(async () => {\n  if (Studio.authentication && !Studio.authentication.user.isAdmin) {\n    return\n  }\n\n  Studio.addEditorComponent('versionControlHistory', HistoryEditor)\n  Studio.addEditorComponent('versionControlLocalChanges', LocalChangesEditor)\n\n  class VCToolbar extends Component {\n    constructor (props) {\n      super(props)\n\n      this.state = {\n        expandedMenu: false\n      }\n\n      this.handleVCMenuTrigger = this.handleVCMenuTrigger.bind(this)\n\n      this.vcMenuTriggerRef = React.createRef()\n      this.vcMenuContainerRef = React.createRef()\n    }\n\n    openHistory (e) {\n      e.stopPropagation()\n      Studio.openTab({ key: 'versionControlHistory', editorComponentKey: 'versionControlHistory', title: 'Commits history' })\n    }\n\n    openLocalChanges (e) {\n      e.stopPropagation()\n      Studio.openTab({ key: 'versionControlLocalChanges', editorComponentKey: 'versionControlLocalChanges', title: 'Uncommited changes' })\n    }\n\n    handleVCMenuTrigger (e) {\n      e.stopPropagation()\n\n      if (\n        this.vcMenuTriggerRef.current == null ||\n        this.vcMenuContainerRef.current == null\n      ) {\n        return\n      }\n\n      if (\n        this.vcMenuTriggerRef.current.contains(e.target) &&\n        !this.vcMenuContainerRef.current.contains(e.target)\n      ) {\n        this.setState((prevState) => ({\n          expandedMenu: !prevState.expandedMenu\n        }))\n      }\n    }\n\n    render () {\n      return (\n        <div\n          ref={this.vcMenuTriggerRef}\n          className='toolbar-button'\n          onClick={(e) => {\n            this.openLocalChanges(e)\n            this.setState({ expandedMenu: false })\n          }}\n        >\n          <i className='fa fa-history ' />Commit\n          <span\n            className={style.runCaret}\n            onClick={this.handleVCMenuTrigger}\n          />\n          <Popup\n            ref={this.vcMenuContainerRef}\n            open={this.state.expandedMenu}\n            position={{ top: undefined, right: undefined }}\n            onRequestClose={() => this.setState({ expandedMenu: false })}\n          >\n            {(itemProps) => {\n              if (!itemProps.open) {\n                return\n              }\n\n              return (\n                <div\n                  title='History'\n                  className='toolbar-button'\n                  onClick={(e) => {\n                    this.openHistory(e)\n                    itemProps.closeMenu()\n                  }}\n                >\n                  <i className='fa fa-history' /><span>History</span>\n                </div>\n              )\n            }}\n          </Popup>\n        </div>\n      )\n    }\n  }\n\n  Studio.addToolbarComponent(VCToolbar)\n})\n","import React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\nimport ChangesTable from './ChangesTable.js'\nimport style from './VersionControl.css'\n\nexport default class HistoryEditor extends Component {\n  constructor () {\n    super()\n    this.state = { history: [], inExecution: false }\n  }\n\n  onTabActive () {\n    this.load()\n  }\n\n  async load () {\n    if (this.fetchRequested) {\n      return\n    }\n\n    this.fetchRequested = true\n\n    try {\n      const res = await Studio.api.get('/api/version-control/history')\n      this.setState({ history: res })\n    } catch (e) {\n      alert(e)\n    } finally {\n      this.fetchRequested = false\n    }\n  }\n\n  async checkout (id) {\n    if (this.state.inExecution) {\n      return\n    }\n\n    try {\n      this.setState({ inExecution: true })\n\n      const localChanges = await Studio.api.get('/api/version-control/local-changes')\n\n      if (localChanges.length > 0) {\n        this.setState({ inExecution: false })\n        return this.setState({ error: 'You have uncommitted changes. You need to commit or revert them before checkout.' })\n      }\n\n      if (confirm('This will change the state of all entities to the state stored with selected commit. Are you sure?')) {\n        await Studio.api.post('/api/version-control/checkout', {\n          data: {\n            _id: id\n          }\n        })\n\n        this.setState({ inExecution: false })\n        return Studio.reset().catch((e) => console.error(e))\n      } else {\n        this.setState({ inExecution: false })\n      }\n    } catch (e) {\n      this.setState({ inExecution: false })\n      alert(e)\n    }\n  }\n\n  async selectCommit (c) {\n    this.setState({ commit: c })\n\n    try {\n      const res = await Studio.api.get(`/api/version-control/diff/${c._id}`)\n      this.setState({ diff: res })\n    } catch (e) {\n      alert(e)\n    }\n  }\n\n  renderCommit (commit) {\n    return (\n      <div>\n        <h2><i className='fa fa-info-circle' /> {commit.message}</h2>\n        <div>\n          <small>{commit.date.toLocaleString()}</small>\n          <button className='button danger' disabled={this.state.inExecution} onClick={() => this.checkout(commit._id)}>Checkout</button>\n          <span style={{ color: 'red', marginTop: '0.5rem', display: this.state.error ? 'block' : 'none' }}>{this.state.error}</span>\n        </div>\n      </div>\n    )\n  }\n\n  localChanges () {\n    Studio.openTab({ key: 'versionControlLocalChanges', editorComponentKey: 'versionControlLocalChanges', title: 'Uncommitted changes' })\n  }\n\n  render () {\n    return (\n      <div className='block custom-editor'>\n        <h2>\n          <i className='fa fa-history' /> Commits history\n          <button className='button confirmation' onClick={() => this.localChanges()}>Uncommitted changes</button>\n        </h2>\n        <div style={{ marginTop: '1rem', marginBottom: '1rem' }}>\n          {this.state.history.length > 0 ? 'Select a commit from the list to inspect the changes..' : ''}\n        </div>\n        <div className={style.listContainer + ' block-item'}>\n          <table className='table'>\n            <thead>\n              <tr>\n                <th>date</th>\n                <th>message</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.history.map((h) => (\n                <tr key={h._id} onClick={() => this.selectCommit(h)}>\n                  <td>{h.date.toLocaleString()}</td>\n                  <td>{h.message}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n        <div style={{ marginTop: '1rem', marginBottom: '1rem' }}>\n          {this.state.commit ? this.renderCommit(this.state.commit) : null}\n        </div>\n        <div className={style.listContainer + ' block-item'}>\n          {this.state.diff ? <ChangesTable changes={this.state.diff} /> : ''}\n        </div>\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport fileSaver from 'filesaver.js-npm'\n\nconst b64toBlob = (b64Data, contentType = '', sliceSize = 512) => {\n  const byteCharacters = atob(b64Data)\n  const byteArrays = []\n\n  for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n    const slice = byteCharacters.slice(offset, offset + sliceSize)\n\n    const byteNumbers = new Array(slice.length)\n    for (let i = 0; i < slice.length; i++) {\n      byteNumbers[i] = slice.charCodeAt(i)\n    }\n\n    const byteArray = new Uint8Array(byteNumbers)\n\n    byteArrays.push(byteArray)\n  }\n\n  const blob = new Blob(byteArrays, { type: contentType })\n  return blob\n}\n\nexport default class DownloadBigFileModal extends Component {\n  download () {\n    const blob = b64toBlob(this.props.options.change.patch, this.props.options.change.contentMimeType)\n    const nameParts = this.props.options.change.name.split('.')\n    let nameExtension\n\n    if (nameParts.length > 1) {\n      nameExtension = nameParts.slice(-1)[0]\n    }\n\n    let filename = ''\n\n    if (nameExtension != null && nameExtension === this.props.options.change.contentFileExtension) {\n      filename = this.props.options.change.name\n    } else {\n      filename = `${this.props.options.change.name}.${this.props.options.change.contentFileExtension}`\n    }\n\n    fileSaver.saveAs(blob, filename)\n  }\n\n  renderDownload () {\n    return (\n      <div>\n        <p>The version control doesn't diff big or binary files. Please download it to see its content</p>\n        <div className='button-bar'>\n          <button className='button confirmation' onClick={() => this.download()}>Download</button>\n        </div>\n      </div>\n    )\n  }\n\n  renderEmpty () {\n    return (\n      <div>\n        <p>The new document is empty.</p>\n        <div className='button-bar'>\n          <button className='button confirmation' onClick={() => this.props.close()}>Ok</button>\n        </div>\n      </div>\n    )\n  }\n\n  render () {\n    const filename = this.props.options.change.path.split('/')[0]\n\n    return (\n      <div>\n        <h2>{filename}</h2>\n        {this.props.options.change.patch ? this.renderDownload() : this.renderEmpty()}\n      </div>\n    )\n  }\n}\n","module.exports = Studio.libraries['filesaver.js-npm'];","import React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\nimport ChangesTable from './ChangesTable.js'\nimport style from './VersionControl.css'\n\nexport default class LocalChangesEditor extends Component {\n  constructor (props) {\n    super(props)\n    this.state = { message: '', inExecution: false }\n  }\n\n  onTabActive () {\n    this.load()\n  }\n\n  async load () {\n    if (this.fetchRequested) {\n      return\n    }\n\n    this.fetchRequested = true\n\n    try {\n      const res = await Studio.api.get('/api/version-control/local-changes')\n      this.setState({ diff: res })\n    } catch (e) {\n      alert(e)\n    } finally {\n      this.fetchRequested = false\n    }\n  }\n\n  async commit () {\n    if (this.state.inExecution) {\n      return\n    }\n\n    if (!this.state.message) {\n      return this.setState({ error: 'Commit message must be filled' })\n    }\n\n    this.setState({ inExecution: true })\n\n    try {\n      await Studio.api.post('/api/version-control/commit', {\n        data: {\n          message: this.state.message\n        }\n      })\n      this.setState({ message: '', error: null, inExecution: false })\n      await this.load()\n    } catch (e) {\n      this.setState({ inExecution: false })\n      alert(e)\n    }\n  }\n\n  async revert () {\n    if (this.state.inExecution) {\n      return\n    }\n\n    this.setState({ inExecution: true })\n\n    try {\n      if (confirm('This will revert all your changes to the previous commit. In case you have no previous commit, you will loose all entities! Are you sure?')) {\n        await Studio.api.post('/api/version-control/revert')\n        this.setState({ inExecution: false })\n        return Studio.reset().catch((e) => console.error(e))\n      } else {\n        this.setState({ inExecution: false })\n      }\n    } catch (e) {\n      this.setState({ inExecution: false })\n      alert(e)\n    }\n  }\n\n  history () {\n    Studio.openTab({ key: 'versionControlHistory', editorComponentKey: 'versionControlHistory', title: 'Commits history' })\n  }\n\n  render () {\n    return (\n      <div className='block custom-editor'>\n        <h1>\n          <i className='fa fa-history' /> uncommitted changes\n          <button className='button confirmation' onClick={() => this.history()}>Commits history</button>\n        </h1>\n        <div className='form-group'>\n          The version control is currently in beta.\n        </div>\n        <div className='form-group'>\n          <label>Message</label>\n          <input type='text' value={this.state.message} onChange={(event) => this.setState({ message: event.target.value, error: null })} />\n          <span style={{ color: 'red', display: this.state.error ? 'block' : 'none' }}>{this.state.error}</span>\n        </div>\n        <div>\n          <button className='button confirmation' disabled={this.state.inExecution} onClick={() => this.commit()}>Commit</button>\n          <button className='button danger' disabled={this.state.inExecution} onClick={() => this.revert()}>Revert</button>\n        </div>\n        <div className={style.listContainer + ' block-item'}>\n          {this.state.diff ? <ChangesTable changes={this.state.diff} /> : ''}\n        </div>\n      </div>\n    )\n  }\n}\n"],"sourceRoot":""}