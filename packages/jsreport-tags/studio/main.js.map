{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"Studio.libraries['react']\"","webpack:///external \"Studio\"","webpack:///./studio/ShowColor.js","webpack:///./studio/emitter.js","webpack:///./studio/findTagInSet.js","webpack:///./studio/organizeState.js","webpack:///./studio/ColorPickerTrigger.js","webpack:///./studio/simpleCheckForValidColor.js","webpack:///./studio/colorLuminance.js","webpack:///./studio/TagEntityTreeButtonToolbar.css","webpack:///./studio/main_dev.js","webpack:///./studio/NewTagModal.js","webpack:///./studio/ColorPicker/index.js","webpack:///./studio/ColorPicker/ColorWrap.js","webpack:////Volumes/DATA/workspace/jsreport/new-arch/node_modules/lodash.debounce/index.js","webpack:///(webpack)/buildin/global.js","webpack:///./studio/ColorPicker/Picker.js","webpack:///./studio/ColorPicker/utils/handleHover.js","webpack:///./studio/ColorPicker/Swatch.js","webpack:///./studio/TagEditor.js","webpack:///./studio/TagProperties.js","webpack:///./studio/EntityTagProperties.js","webpack:///./studio/EntityTreeTagOrganizer.js","webpack:////Volumes/DATA/workspace/jsreport/new-arch/node_modules/mitt/dist/mitt.es.js","webpack:///./shared/reservedTagNames.js","webpack:///./studio/TagEntityTreeOrganizeButtonToolbar.js","webpack:///./studio/TagEntityTreeFilterButtonToolbar.js","webpack:///./studio/TagEntityTreeFilterByTags.js","webpack:///external \"Studio.libraries['react-list']\"","webpack:///./studio/getColorLuminance.js","webpack:///./studio/hexToRgb.js","webpack:///./studio/TagEntityTreeFilterByTags.css","webpack:///./studio/TagEntityTreeItem.js","webpack:///./studio/TagEntityTreeTagGroupItem.js","webpack:///./studio/filterItemWithTagsStrategy.js"],"names":["ShowColor","props","color","height","width","borderColor","currentColor","backgroundColor","borderWidth","borderStyle","display","verticalAlign","emitter","tagSet","tagShortId","tag","found","some","tagInSet","shortid","undefined","current","filterTags","ColorPicketTrigger","displayColorPicker","containerStyles","onClickColorTrigger","onInputChange","onChangeSelectionColor","onCloseColorPicker","translateXColorPickerFromTrigger","translateYColorPickerFromTrigger","containerTriggerPickerStyles","padding","defaultContainerStyles","currentContainerStyles","Object","assign","colorPickerContainerStyles","transformValue","transform","ev","target","value","hex","HEX_COLOR_REGEXP","simpleCheckForValidColor","test","lum","selectedLum","selectedHex","String","replace","length","rgb","c","i","parseInt","substr","Math","round","min","max","toString","organizeState","Studio","addEntitySet","name","faIcon","visibleName","onNew","options","openModal","NewTagModal","helpUrl","referenceAttributes","entityTreePosition","initializeListeners","push","keys","entitySets","forEach","entitySetName","entitySet","indexOf","on","organizationMode","selectedTags","addEditorComponent","TagEditor","addPropertiesComponent","TagProperties","title","entity","__entitySet","EntityTagProperties","addEntityTreeWrapperComponent","EntityTreeTagOrganizer","addEntityTreeToolbarComponent","TagEntityTreeFilterButtonToolbar","TagEntityTreeOrganizeButtonToolbar","addEntityTreeItemComponent","TagEntityTreeItem","TagEntityTreeTagGroupItem","entityTreeFilterItemResolvers","filterItemWithTagsStrategy","nameRef","React","createRef","descriptionRef","state","selectedColor","error","setTimeout","focus","e","key","createTag","setState","defaults","description","api","post","data","response","addExistingEntity","openTab","close","message","handleKeyPress","border","colorInputValue","colorHex","resize","opacity","Component","Picker","colorToState","ColorWrap","ColorPicker","visible","debounce","fn","event","handleChange","bind","isValidColor","colors","onChangeComplete","onChange","PureComponent","defaultProps","PickerSwatch","hover","onClick","styles","swatch","position","zIndex","outline","boxShadow","triangle","card","background","borderRadius","flexWrap","source","map","handleHover","Span","handleMouseOver","handleMouseOut","Swatch","style","cursor","handleClick","entities","_id","v","EntityRefSelect","selectValues","selected","tags","removeInvalidTagReferences","updatedTags","filter","t","k","references","getNameAndColor","foundTags","tg","getSelectedTags","tIndex","allSelectTags","marginRight","require","noTagGroupName","tagsGroupName","organizeByDefault","extensions","organizeByTags","onOrganizationModeChange","off","organizeByTag","newItems","entitySetsNames","allTagEntities","currentTagEntities","entitiesByTagAndType","entitiesByTypeWithoutTag","tagsWithNoEntities","tagName","entitiesByType","typesInTag","every","type","tagItem","typeItem","isGroup","items","isEntitySet","noTagsItem","item","tagsItem","collection","tagFound","getReferences","entityTag","groupEntityByTagAndType","entitiesInSet","entitiesInSetCount","j","addItemsByTag","cloneElement","children","renderDefaultTree","renderTree","getSetsToRender","groupEntitiesByTag","reservedTagNames","module","exports","default","handleOrganizationModeChange","stopPropagation","emit","closeMenu","active","showFilter","openFilter","closeFilter","handleTagSelectChange","setFilter","allTags","isActive","TagEntityTreeFilterByTags","tagSelectionRef","tagSelectionInputRef","tagListRef","showTagsList","filterText","createRenderer","addSelectedTag","onTagSelectionClick","onChangeInputTag","onKeyDownInputTag","onRemoveTagItem","index","renderTagItem","previousSelectedTags","onTagSelectChange","filterPass","foundInSelectedTags","selectTag","defaultPrevented","keyCode","inputTag","remove","enterKey","removeKey","preventDefault","onFilterClose","selectedTagsLastIndex","tagIndex","originalSelectedTags","slice","tagsListItem","tagsToShowInList","getTagsToShow","stylesForTagsList","stylesForInputTag","searchTagsContainer","searchTagsInputBox","tagsSelect","tagStyles","tagsSelectItem","tagsSelectItemRemove","searchTags","tagsListContainer","tagsList","tagsListEmpty","RsRGB","GsRGB","BsRGB","R","G","B","r","g","b","pow","shorthandRegex","fullHex","m","result","exec","tagsLength","marginLeft","filterInfo","allTagsInEntity","tagInEntity"],"mappings":"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AACD;AACF;AAjCyB;AAAA;AAAA,+BAmChB;AACR,eACE,8BAAC,MAAD,eACM,KAAK9I,KADX,EAEM,KAAK6G,KAFX;AAGE,oBAAU,KAAKkC;AAHjB,WADF;AAOD;AA3CyB;AAAA;AAAA,+CAiBO/I,KAjBP,EAiBc;AACtC,4BACKwI,aAAaxI,MAAMC,KAAnB,CADL;AAEE0I,mBAAS3I,MAAMS;AAFjB;AAID;AAtByB;;AAAA;AAAA,IACD4I,wBAAiBf,gBADhB;;AA8C5BI,cAAYY,YAAZ,GAA2B;AACzBrJ,WAAO;AADkB,GAA3B;;AAIA,SAAOyI,WAAP;AACD,CAnDD;;kBAqDeD,S;;;;;;AClEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,OAAO,YAAY;AAC9B,WAAW,QAAQ;AACnB;AACA,WAAW,OAAO;AAClB;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,8CAA8C,kBAAkB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACxXA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;A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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","module.exports = Studio.libraries['react'];","module.exports = Studio;","import React from 'react'\nimport simpleCheckForValidColor from './simpleCheckForValidColor'\nimport colorLuminance from './colorLuminance'\n\nconst ShowColor = (props) => {\n  const {\n    color,\n    height = 15,\n    width = 20\n  } = props\n\n  let borderColor = props.borderColor\n  let currentColor = 'inherit'\n\n  if (simpleCheckForValidColor(color)) {\n    currentColor = color\n  }\n\n  if (!borderColor) {\n    borderColor = colorLuminance(currentColor, -0.35)\n  }\n\n  return (\n    <span style={{\n      backgroundColor: currentColor,\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: borderColor,\n      display: 'inline-block',\n      height: height,\n      verticalAlign: 'middle',\n      width: width\n    }} />\n  )\n}\n\nexport default ShowColor\n","import mitt from 'mitt'\n\nconst emitter = mitt()\n\nexport default emitter\n","\nexport default (tagSet, tagShortId) => {\n  let tag\n\n  const found = tagSet.some((tagInSet) => {\n    tag = tagInSet\n    return tagInSet.shortid === tagShortId\n  })\n\n  if (found) {\n    return tag\n  }\n\n  return undefined\n}\n","\nexport let current\nexport let filterTags\n","import React from 'react'\nimport { Popover } from 'jsreport-studio'\nimport ShowColor from './ShowColor'\nimport ColorPicker from './ColorPicker'\n\nconst ColorPicketTrigger = (props) => {\n  const {\n    displayColorPicker,\n    color,\n    containerStyles,\n    onClickColorTrigger,\n    onInputChange,\n    onChangeSelectionColor,\n    onCloseColorPicker,\n    translateXColorPickerFromTrigger,\n    translateYColorPickerFromTrigger\n  } = props\n\n  const containerTriggerPickerStyles = {\n    display: 'inline-block',\n    height: '32px',\n    padding: '5px'\n  }\n\n  const defaultContainerStyles = {\n    display: 'inline-block'\n  }\n\n  const currentColor = color || ''\n  const currentContainerStyles = Object.assign({}, defaultContainerStyles, containerStyles)\n\n  let colorPickerContainerStyles = {}\n\n  if (translateXColorPickerFromTrigger || translateYColorPickerFromTrigger) {\n    let transformValue = ''\n\n    if (translateXColorPickerFromTrigger) {\n      transformValue += `translateX(${translateXColorPickerFromTrigger}) `\n    }\n\n    if (translateYColorPickerFromTrigger) {\n      transformValue += `translateY(${translateYColorPickerFromTrigger}) `\n    }\n\n    colorPickerContainerStyles.transform = transformValue\n  }\n\n  return (\n    <div style={currentContainerStyles}>\n      <span style={containerTriggerPickerStyles}>\n        <span style={{ display: 'inline-block' }}>\n          <ShowColor color={currentColor} />&nbsp;\n          <input\n            type='text'\n            value={currentColor}\n            style={{ width: '90px' }}\n            maxLength={7}\n            placeholder='#006600'\n            onFocus={onClickColorTrigger}\n            onChange={(ev) => typeof onInputChange === 'function' && onInputChange(ev.target.value)}\n          />\n        </span>\n      </span>\n      <Popover\n        wrapper={false}\n        open={displayColorPicker}\n        onClose={onCloseColorPicker}\n      >\n        <div style={colorPickerContainerStyles}>\n          <ColorPicker\n            color={currentColor}\n            onChangeComplete={(color) => typeof onChangeSelectionColor === 'function' && onChangeSelectionColor(color.hex)}\n          />\n        </div>\n      </Popover>\n    </div>\n  )\n}\n\nexport default ColorPicketTrigger\n","const HEX_COLOR_REGEXP = /^#[0-9A-F]{6}$/i\n\nconst simpleCheckForValidColor = (color) => {\n  return HEX_COLOR_REGEXP.test(color)\n}\n\nexport default simpleCheckForValidColor\n","\nexport default (hex, lum) => {\n  const selectedLum = lum || 0\n  let selectedHex\n\n  selectedHex = String(hex).replace(/[^0-9a-f]/gi, '')\n\n  if (selectedHex.length < 6) {\n    selectedHex = selectedHex[0] + selectedHex[0] + selectedHex[1] + selectedHex[1] + selectedHex[2] + selectedHex[2]\n  }\n\n  // convert to decimal and change luminosity\n  let rgb = '#'\n  let c\n  let i\n\n  for (i = 0; i < 3; i++) {\n    c = parseInt(selectedHex.substr(i * 2, 2), 16)\n    c = Math.round(Math.min(Math.max(0, c + (c * selectedLum)), 255)).toString(16)\n    rgb += ('00' + c).substr(c.length)\n  }\n\n  return rgb\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"active\":\"x-tags-TagEntityTreeButtonToolbar-active\"};","import Studio from 'jsreport-studio'\nimport NewTagModal from './NewTagModal'\nimport TagEditor from './TagEditor'\nimport TagProperties from './TagProperties'\nimport EntityTagProperties from './EntityTagProperties'\nimport EntityTreeTagOrganizer from './EntityTreeTagOrganizer'\nimport TagEntityTreeOrganizeButtonToolbar from './TagEntityTreeOrganizeButtonToolbar'\nimport TagEntityTreeFilterButtonToolbar from './TagEntityTreeFilterButtonToolbar'\nimport TagEntityTreeItem from './TagEntityTreeItem'\nimport TagEntityTreeTagGroupItem from './TagEntityTreeTagGroupItem'\nimport emitter from './emitter'\nimport * as organizeState from './organizeState'\nimport filterItemWithTagsStrategy from './filterItemWithTagsStrategy'\n\nStudio.addEntitySet({\n  name: 'tags',\n  faIcon: 'fa-tag',\n  visibleName: 'tag',\n  onNew: (options) => Studio.openModal(NewTagModal, options),\n  helpUrl: 'http://jsreport.net/learn/tags',\n  referenceAttributes: ['color'],\n  entityTreePosition: 300\n})\n\n// wait for all extensions to be loaded\nStudio.initializeListeners.push(() => {\n  // add tags to referenceAttributes in all entities\n  Object.keys(Studio.entitySets).forEach((entitySetName) => {\n    let entitySet = Studio.entitySets[entitySetName]\n\n    // ignore tags entity set\n    if (entitySet.name === 'tags') {\n      return\n    }\n\n    if (entitySet.referenceAttributes.indexOf('tags') === -1) {\n      entitySet.referenceAttributes.push('tags')\n    }\n  })\n})\n\nemitter.on('organizationModeByTagsChanged', (organizationMode) => { organizeState.current = organizationMode })\nemitter.on('filterByTagsChanged', (selectedTags) => { organizeState.filterTags = selectedTags })\n\nStudio.addEditorComponent('tags', TagEditor)\nStudio.addPropertiesComponent(TagProperties.title, TagProperties, (entity) => entity.__entitySet === 'tags')\nStudio.addPropertiesComponent(EntityTagProperties.title, EntityTagProperties, (entity) => entity.__entitySet !== 'tags')\n\nStudio.addEntityTreeWrapperComponent(EntityTreeTagOrganizer)\n\nStudio.addEntityTreeToolbarComponent(TagEntityTreeFilterButtonToolbar, 'group')\nStudio.addEntityTreeToolbarComponent(TagEntityTreeOrganizeButtonToolbar, 'group')\n\nStudio.addEntityTreeItemComponent(TagEntityTreeItem)\nStudio.addEntityTreeItemComponent(TagEntityTreeTagGroupItem, 'groupRight')\n\nStudio.entityTreeFilterItemResolvers.push(filterItemWithTagsStrategy)\n","import React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\nimport ColorPicketTrigger from './ColorPickerTrigger'\n\nclass NewTagModal extends Component {\n  constructor (props) {\n    super(props)\n\n    this.nameRef = React.createRef()\n    this.descriptionRef = React.createRef()\n\n    this.state = {\n      displayColorPicker: false,\n      selectedColor: '',\n      error: null\n    }\n  }\n\n  // the modal component for some reason after open focuses the panel itself\n  componentDidMount () {\n    setTimeout(() => this.nameRef.current.focus(), 0)\n  }\n\n  handleKeyPress (e) {\n    if (e.key === 'Enter') {\n      this.createTag()\n    }\n  }\n\n  async createTag () {\n    let entity = {}\n\n    if (!this.nameRef.current.value) {\n      return this.setState({\n        error: 'name field cannot be empty'\n      })\n    }\n\n    if (!this.state.selectedColor) {\n      return this.setState({\n        error: 'color field cannot be empty'\n      })\n    }\n\n    if (this.props.options.defaults != null) {\n      entity = Object.assign(entity, this.props.options.defaults)\n    }\n\n    entity.name = this.nameRef.current.value\n    entity.color = this.state.selectedColor\n    entity.description = this.descriptionRef.current.value\n\n    try {\n      let response = await Studio.api.post('/odata/tags', {\n        data: entity\n      })\n\n      response.__entitySet = 'tags'\n\n      Studio.addExistingEntity(response)\n      Studio.openTab(response)\n      this.props.close()\n    } catch (e) {\n      this.setState({\n        error: e.message\n      })\n    }\n  }\n\n  render () {\n    const {\n      displayColorPicker,\n      selectedColor,\n      error\n    } = this.state\n\n    return (\n      <div>\n        <div className='form-group'>\n          <label>Name</label>\n          <input type='text' name='name' ref={this.nameRef} placeholder='tag name...' onKeyPress={(e) => this.handleKeyPress(e)} />\n        </div>\n        <div className='form-group'>\n          <label>Color</label>\n\n          <div>\n            <ColorPicketTrigger\n              displayColorPicker={displayColorPicker}\n              containerStyles={{ border: '1px dashed #000' }}\n              color={selectedColor}\n              onClickColorTrigger={() => this.setState({ displayColorPicker: true })}\n              onCloseColorPicker={() => this.setState({ displayColorPicker: false })}\n              onInputChange={(colorInputValue) => colorInputValue !== selectedColor && this.setState({ selectedColor: colorInputValue })}\n              onChangeSelectionColor={(colorHex) => this.setState({ selectedColor: colorHex })}\n            />\n          </div>\n        </div>\n        <div className='form-group'>\n          <label>Description</label>\n          <textarea\n            name='description'\n            ref={this.descriptionRef}\n            placeholder='You can add more details about this tag here...'\n            rows='4'\n            style={{ resize: 'vertical' }}\n          />\n        </div>\n        <div className='form-group'>\n          <span\n            style={{color: 'red', display: error ? 'block' : 'none'}}>{error}</span>\n        </div>\n        <div className='form-group' style={{opacity: 0.8}}>\n          <hr />\n          <span>\n            You can use tags to organize jsreport objects.<br />\n            This can be for example a tag to organize and group related templates, images, data, scripts, assets, etc. <br />\n            See the <a target='_blank' title='Help' href='http://jsreport.net/learn/tags'>documentation</a> for details.\n          </span>\n        </div>\n        <div className='button-bar'>\n          <button onClick={() => this.createTag()} className={'button confirmation'}>Ok</button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default NewTagModal\n","\nimport ColorWrap from './ColorWrap'\nimport Picker from './Picker'\n\nexport default ColorWrap(Picker)\n","\nimport React, { Component, PureComponent } from 'react'\nimport debounce from 'lodash.debounce'\nimport simpleCheckForValidColor from '../simpleCheckForValidColor'\n\nconst colorToState = (data) => {\n  const color = data.hex ? data.hex : data\n\n  return {\n    hex: `${color}`\n  }\n}\n\nconst ColorWrap = (Picker) => {\n  class ColorPicker extends (PureComponent || Component) {\n    constructor (props) {\n      super(props)\n\n      this.state = {\n        ...colorToState(props.color),\n        visible: props.display\n      }\n\n      this.debounce = debounce((fn, data, event) => {\n        fn(data, event)\n      }, 100)\n\n      this.handleChange = this.handleChange.bind(this)\n    }\n\n    static getDerivedStateFromProps (props) {\n      return {\n        ...colorToState(props.color),\n        visible: props.display\n      }\n    }\n\n    handleChange (data, event) {\n      const isValidColor = simpleCheckForValidColor(data.hex)\n\n      if (isValidColor) {\n        const colors = colorToState(data)\n        this.setState(colors)\n        this.props.onChangeComplete && this.debounce(this.props.onChangeComplete, colors, event)\n        this.props.onChange && this.props.onChange(colors, event)\n      }\n    }\n\n    render () {\n      return (\n        <Picker\n          {...this.props}\n          {...this.state}\n          onChange={this.handleChange}\n        />\n      )\n    }\n  }\n\n  ColorPicker.defaultProps = {\n    color: ''\n  }\n\n  return ColorPicker\n}\n\nexport default ColorWrap\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","\nimport handleHover from './utils/handleHover'\nimport Swatch from './Swatch'\n\nconst PickerSwatch = handleHover(({ hover, color, onClick }) => {\n  const styles = {\n    swatch: {\n      width: '25px',\n      height: '25px'\n    }\n  }\n\n  if (hover) {\n    styles.swatch = {\n      ...styles.swatch,\n      position: 'relative',\n      zIndex: '2',\n      outline: '2px solid #fff',\n      boxShadow: '0 0 5px 2px rgba(0,0,0,0.25)'\n    }\n  }\n\n  return (\n    <div style={styles.swatch}>\n      <Swatch color={color} onClick={onClick} />\n    </div>\n  )\n})\n\nconst Picker = ({ width, colors, onChange, triangle }) => {\n  const styles = {\n    card: {\n      width,\n      background: '#fff',\n      border: '1px solid rgba(0,0,0,0.2)',\n      boxShadow: '0 3px 12px rgba(0,0,0,0.15)',\n      borderRadius: '4px',\n      position: 'relative',\n      padding: '5px',\n      display: 'flex',\n      flexWrap: 'wrap'\n    }\n  }\n  const handleChange = (hex, e) => onChange({ hex, source: 'hex' }, e)\n\n  return (\n    <div style={styles.card}>\n      {colors.map((c) => (\n        <PickerSwatch color={c} key={c} onClick={handleChange} />\n      ))}\n    </div>\n  )\n}\n\nPicker.defaultProps = {\n  width: '200px',\n  colors: [\n    '#B80000', '#DB3E00', '#FCCB00', '#008B02', '#006B76',\n    '#1273DE', '#004DCF', '#5300EB', '#EB9694', '#FAD0C3',\n    '#FEF3BD', '#C1E1C5', '#BEDADC', '#C4DEF6'\n  ]\n}\n\nexport default Picker\n","import React from 'react'\n\nconst handleHover = (Component, Span = 'span') => {\n  return class Hover extends React.Component {\n    constructor (props) {\n      super(props)\n\n      this.state = { hover: false }\n\n      this.handleMouseOver = this.handleMouseOver.bind(this)\n      this.handleMouseOut = this.handleMouseOut.bind(this)\n    }\n\n    handleMouseOver () {\n      this.setState({ hover: true })\n    }\n    handleMouseOut () {\n      this.setState({ hover: false })\n    }\n\n    render () {\n      return <Span onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <Component {...this.props} {...this.state} />\n      </Span>\n    }\n  }\n}\n\nexport default handleHover\n","\nconst Swatch = ({ color, style, onClick, title = color }) => {\n  const styles = {\n    swatch: {\n      background: color,\n      height: '100%',\n      width: '100%',\n      cursor: 'pointer'\n    }\n  }\n\n  const handleClick = (e) => onClick(color, e)\n\n  return (\n    <div style={styles.swatch} onClick={handleClick} title={title} />\n  )\n}\n\nexport default Swatch\n","import React, { Component } from 'react'\nimport ShowColor from './ShowColor'\n\nclass TagEditor extends Component {\n  render () {\n    const { entity } = this.props\n\n    let description\n\n    if (entity.description) {\n      description = entity.description\n    } else {\n      description = <i>{'(no description for this tag)'}</i>\n    }\n\n    return (\n      <div className='custom-editor'>\n        <div>\n          <h1><i className='fa fa-tag' /> {entity.name}</h1>\n        </div>\n        <div>\n          Description: <br />\n          <p>{description}</p>\n        </div>\n        <div>\n          Color: <ShowColor color={entity.color} />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default TagEditor\n","import React, { Component } from 'react'\nimport ShowColor from './ShowColor'\nimport ColorPicketTrigger from './ColorPickerTrigger'\n\nexport default class TagProperties extends Component {\n  static title (entity, entities) {\n    return (\n      <span>\n        <span>\n          tag (color: {<ShowColor color={entity.color} width={15} height={15} />})\n        </span>\n      </span>\n    )\n  }\n\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      displayColorPicker: false\n    }\n  }\n\n  render () {\n    const { displayColorPicker } = this.state\n    const { entity, onChange } = this.props\n\n    return (\n      <div className='properties-section'>\n        <div className='form-group'>\n          <label>Color</label>\n\n          <div>\n            <ColorPicketTrigger\n              displayColorPicker={displayColorPicker}\n              containerStyles={{ border: '1px dashed #000' }}\n              color={entity.color}\n              onClickColorTrigger={() => this.setState({ displayColorPicker: true })}\n              onCloseColorPicker={() => this.setState({ displayColorPicker: false })}\n              onInputChange={(colorInputValue) => colorInputValue !== entity.color && onChange({ _id: entity._id, color: colorInputValue })}\n              onChangeSelectionColor={(colorHex) => onChange({ _id: entity._id, color: colorHex })}\n            />\n          </div>\n        </div>\n        <div className='form-group'>\n          <label>Description</label>\n          <textarea\n            rows='4'\n            style={{ resize: 'vertical' }}\n            value={entity.description || ''}\n            onChange={(v) => onChange({ _id: entity._id, description: v.target.value })}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport ShowColor from './ShowColor'\nimport Studio from 'jsreport-studio'\n\nconst EntityRefSelect = Studio.EntityRefSelect\n\nconst selectValues = (selected) => {\n  const tags = selected.map((v) => {\n    return { shortid: v.shortid }\n  })\n\n  return tags\n}\n\nexport default class EntityTagProperties extends Component {\n  static getSelectedTags (entity, entities) {\n    const getNameAndColor = (t) => {\n      const foundTags = Object.keys(entities).map((k) => entities[k]).filter((tg) => tg.shortid === t.shortid)\n\n      return foundTags.length ? { name: foundTags[0].name, color: foundTags[0].color } : { name: '', color: undefined }\n    }\n\n    return (entity.tags || []).map((t) => ({\n      ...t,\n      ...getNameAndColor(t)\n    }))\n  }\n\n  static title (entity, entities) {\n    if (!entity.tags || !entity.tags.length) {\n      return 'tags'\n    }\n\n    return (\n      <span>\n        tags:&nbsp;\n        <span>\n          {\n            EntityTagProperties.getSelectedTags(entity, entities).map((t, tIndex, allSelectTags) => {\n              return (\n                <span key={t.name} style={{ display: 'inline-block', marginRight: '2px' }}>\n                  <ShowColor color={t.color} width={12} height={15} />\n                  &nbsp;\n                  {t.name}\n                  {tIndex === allSelectTags.length - 1 ? '' : ','}\n                </span>\n              )\n            })\n          }\n        </span>\n      </span>\n    )\n  }\n\n  componentDidMount () {\n    this.removeInvalidTagReferences()\n  }\n\n  componentDidUpdate () {\n    this.removeInvalidTagReferences()\n  }\n\n  removeInvalidTagReferences () {\n    const { entity, entities, onChange } = this.props\n\n    if (!entity.tags) {\n      return\n    }\n\n    const updatedTags = entity.tags.filter((t) => Object.keys(entities).filter((k) => entities[k].__entitySet === 'tags' && entities[k].shortid === t.shortid).length)\n\n    if (updatedTags.length !== entity.tags.length) {\n      onChange({ _id: entity._id, tags: updatedTags })\n    }\n  }\n\n  render () {\n    const { entity, onChange } = this.props\n\n    return (\n      <div className='properties-section'>\n        <div className='form-group'>\n          <EntityRefSelect\n            headingLabel='Select tags'\n            filter={(references) => ({ tags: references.tags })}\n            value={entity.tags ? entity.tags.map((t) => t.shortid) : []}\n            onChange={(selected) => onChange({ _id: entity._id, tags: selectValues(selected) })}\n            multiple\n          />\n        </div>\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\nimport emitter from './emitter'\nimport findTagInSet from './findTagInSet'\n\nconst { noTagGroupName, tagsGroupName } = require('../shared/reservedTagNames')\n\nclass EntityTreeTagOrganizer extends Component {\n  constructor () {\n    super()\n\n    let organizeByDefault = Studio.extensions['tags'].options.organizeByDefault\n\n    if (organizeByDefault == null) {\n      organizeByDefault = false\n    }\n\n    this.state = {\n      organizeByTags: organizeByDefault\n    }\n\n    this.onOrganizationModeChange = this.onOrganizationModeChange.bind(this)\n  }\n\n  componentDidMount () {\n    emitter.on('organizationModeByTagsChanged', this.onOrganizationModeChange)\n  }\n\n  componentWillUnmount () {\n    emitter.off('organizationModeByTagsChanged', this.onOrganizationModeChange)\n  }\n\n  onOrganizationModeChange (organizeByTag) {\n    this.setState({\n      organizeByTags: organizeByTag\n    })\n  }\n\n  addItemsByTag (\n    newItems,\n    entitySetsNames,\n    allTagEntities,\n    currentTagEntities,\n    entitiesByTagAndType,\n    entitiesByTypeWithoutTag\n  ) {\n    const tagsWithNoEntities = []\n\n    allTagEntities.forEach((tag) => {\n      const tagName = tag.name\n      const entitiesByType = entitiesByTagAndType[tagName]\n      const typesInTag = Object.keys(entitiesByType)\n\n      if (\n        typesInTag.length === 0 ||\n        typesInTag.every((type) => entitiesByType[type].length > 0) === false\n      ) {\n        tagsWithNoEntities.push(tag)\n        return\n      }\n\n      let tagItem\n\n      entitySetsNames.forEach((type) => {\n        if (type === 'tags') {\n          return\n        }\n\n        const entities = entitiesByType[type]\n        let typeItem\n\n        if (!tagItem) {\n          tagItem = {\n            name: tagName,\n            isGroup: true,\n            data: tag,\n            items: []\n          }\n\n          newItems.push(tagItem)\n        }\n\n        if (!entities || entities.length === 0) {\n          tagItem.items.push({\n            name: type,\n            isEntitySet: true,\n            items: []\n          })\n\n          return\n        }\n\n        typeItem = {\n          name: type,\n          isEntitySet: true,\n          items: []\n        }\n\n        entities.forEach((entity) => {\n          typeItem.items.push({\n            name: entity.name,\n            data: entity\n          })\n        })\n\n        tagItem.items.push(typeItem)\n      })\n    })\n\n    tagsWithNoEntities.forEach((tag) => {\n      const tagItem = {\n        name: tag.name,\n        isGroup: true,\n        data: tag,\n        items: []\n      }\n\n      entitySetsNames.forEach((type) => {\n        if (type === 'tags') {\n          return\n        }\n\n        tagItem.items.push({\n          name: type,\n          isEntitySet: true,\n          items: []\n        })\n      })\n\n      newItems.push(tagItem)\n    })\n\n    const noTagsItem = {\n      name: noTagGroupName,\n      isGroup: true,\n      items: []\n    }\n\n    entitySetsNames.forEach((type) => {\n      if (type === 'tags') {\n        return\n      }\n\n      const item = {\n        name: type,\n        isEntitySet: true,\n        items: []\n      }\n\n      const entities = entitiesByTypeWithoutTag[type]\n\n      if (entities) {\n        entities.forEach((entity) => {\n          item.items.push({\n            name: entity.name,\n            data: entity\n          })\n        })\n      }\n\n      noTagsItem.items.push(item)\n    })\n\n    newItems.push(noTagsItem)\n\n    const tagsItem = {\n      name: tagsGroupName,\n      isEntitySet: true,\n      items: []\n    }\n\n    if (currentTagEntities) {\n      currentTagEntities.forEach((tag) => {\n        tagsItem.items.push({\n          name: tag.name,\n          data: tag\n        })\n      })\n    }\n\n    newItems.push(tagsItem)\n  }\n\n  groupEntityByTagAndType (collection, allTagEntities, entity) {\n    if (entity.__entitySet === 'tags') {\n      const name = entity.name\n      collection[name] = collection[name] || {}\n    } else if (entity.tags != null) {\n      entity.tags.forEach((tag) => {\n        const tagFound = findTagInSet(allTagEntities, tag.shortid)\n\n        if (tagFound) {\n          const name = tagFound.name\n          collection[name] = collection[name] || []\n          collection[name][entity.__entitySet] = collection[name][entity.__entitySet] || []\n          collection[name][entity.__entitySet].push(entity)\n        }\n      })\n    }\n  }\n\n  groupEntitiesByTag (entitySetsNames, entities) {\n    const newItems = []\n    let allTagEntities = Studio.getReferences().tags || []\n    const entitiesByTagAndType = {}\n    const entitiesByTypeWithoutTag = {}\n\n    // initialize all tag groups based on all tag entities\n    allTagEntities.forEach((entityTag) => {\n      this.groupEntityByTagAndType(entitiesByTagAndType, allTagEntities, entityTag)\n    })\n\n    entitySetsNames.forEach((entitySetName) => {\n      if (entitySetName === 'tags') {\n        return\n      }\n\n      const entitiesInSet = entities[entitySetName]\n\n      if (!entitiesInSet) {\n        return\n      }\n\n      let entitiesInSetCount = entitiesInSet.length\n\n      for (let j = 0; j < entitiesInSetCount; j++) {\n        const entity = entitiesInSet[j]\n\n        if (entity.tags != null) {\n          this.groupEntityByTagAndType(entitiesByTagAndType, allTagEntities, entity)\n        } else {\n          entitiesByTypeWithoutTag[entity.__entitySet] = entitiesByTypeWithoutTag[entity.__entitySet] || []\n          entitiesByTypeWithoutTag[entity.__entitySet].push(entity)\n        }\n      }\n    })\n\n    this.addItemsByTag(\n      newItems,\n      entitySetsNames,\n      allTagEntities,\n      entities.tags,\n      entitiesByTagAndType,\n      entitiesByTypeWithoutTag\n    )\n\n    return newItems\n  }\n\n  render () {\n    const { containerStyles } = this.props\n\n    return (\n      <div style={containerStyles}>\n        {/*\n          extending entity tree's react element to configure\n          custom rendering of items in tree\n        */}\n        {React.cloneElement(this.props.children, {}, ({\n          renderDefaultTree,\n          renderTree,\n          getSetsToRender,\n          entitySets,\n          entities\n        }) => {\n          const { organizeByTags } = this.state\n\n          if (!organizeByTags) {\n            return renderDefaultTree(entitySets, entities)\n          }\n\n          return renderTree(this.groupEntitiesByTag(getSetsToRender(entitySets), entities))\n        })}\n      </div>\n    )\n  }\n}\n\nexport default EntityTreeTagOrganizer\n","//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n                                                               \n\n// An array of all currently registered event handlers for a type\n                                            \n                                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                 \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).slice().map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).slice().map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nexport default mitt;\n//# sourceMappingURL=mitt.es.js.map\n","\nconst noTagGroupName = '(objects without tag)'\nconst tagsGroupName = 'tags'\nconst reservedTagNames = [noTagGroupName, tagsGroupName]\n\nmodule.exports.default = reservedTagNames\nmodule.exports.noTagGroupName = noTagGroupName\nmodule.exports.tagsGroupName = tagsGroupName\n","import React, { Component } from 'react'\nimport * as organizeState from './organizeState'\nimport emitter from './emitter'\nimport styles from './TagEntityTreeButtonToolbar.css'\n\nclass TagEntityTreeOrganizeButtonToolbar extends Component {\n  constructor (props) {\n    super(props)\n\n    this.handleOrganizationModeChange = this.handleOrganizationModeChange.bind(this)\n  }\n\n  handleOrganizationModeChange (ev) {\n    ev.stopPropagation()\n\n    // notify parent that the organization mode has changed\n    emitter.emit('organizationModeByTagsChanged', !organizeState.current)\n    this.props.closeMenu()\n  }\n\n  render () {\n    return (\n      <div\n        title='Group and organize entities tree by tag'\n        style={{ display: 'inline-block' }}\n        onClick={this.handleOrganizationModeChange}\n      >\n        <span\n          style={{ display: 'inline-block', marginRight: '0.3rem' }}\n          className={organizeState.current ? styles.active : ''}\n        >\n          <span className='fa fa-tags' />\n        </span>\n        <span style={{ display: 'inline-block' }}>\n          Group by tag\n        </span>\n      </div>\n    )\n  }\n}\n\nexport default TagEntityTreeOrganizeButtonToolbar\n","import React, { Component } from 'react'\nimport Studio, { Popover } from 'jsreport-studio'\nimport * as organizeState from './organizeState'\nimport emitter from './emitter'\nimport TagEntityTreeFilterByTags from './TagEntityTreeFilterByTags'\nimport styles from './TagEntityTreeButtonToolbar.css'\n\nclass TagEntityTreeFilterButtonToolbar extends Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      showFilter: false,\n      selectedTags: organizeState.filterTags || []\n    }\n\n    this.openFilter = this.openFilter.bind(this)\n    this.closeFilter = this.closeFilter.bind(this)\n    this.handleTagSelectChange = this.handleTagSelectChange.bind(this)\n  }\n\n  openFilter (ev) {\n    ev.stopPropagation()\n    this.setState({ showFilter: true })\n  }\n\n  closeFilter () {\n    this.setState({ showFilter: false })\n    this.props.closeMenu()\n  }\n\n  handleTagSelectChange (selectedTags) {\n    const { setFilter } = this.props\n\n    setFilter({\n      tags: selectedTags\n    })\n\n    this.setState({\n      selectedTags\n    }, () => {\n      emitter.emit('filterByTagsChanged', selectedTags)\n    })\n  }\n\n  render () {\n    const { showFilter, selectedTags } = this.state\n    const allTags = Studio.getReferences().tags\n    const isActive = selectedTags.length > 0\n\n    return (\n      <div\n        title='Filter entities tree by tag'\n        style={{ display: 'inline-block' }}\n        onClick={this.openFilter}\n      >\n        <span style={{ display: 'inline-block' }}>\n          <span\n            style={{ display: 'inline-block', marginRight: '0.3rem' }}\n            className={isActive ? styles.active : ''}\n          >\n            <span className='fa fa-filter' />\n            &nbsp;\n            <span className='fa fa-tag' />\n          </span>\n          <span style={{ display: 'inline-block' }}>\n            Filter by tag\n          </span>\n        </span>\n        <Popover\n          open={showFilter}\n          onClose={this.closeFilter}\n        >\n          <TagEntityTreeFilterByTags\n            tags={allTags}\n            selectedTags={selectedTags}\n            onTagSelectChange={this.handleTagSelectChange}\n            onFilterClose={this.closeFilter}\n          />\n        </Popover>\n      </div>\n    )\n  }\n}\n\nexport default TagEntityTreeFilterButtonToolbar\n","import React, { Component } from 'react'\nimport ReactList from 'react-list'\nimport colorLuminance from './colorLuminance'\nimport getColorLuminance from './getColorLuminance'\nimport ShowColor from './ShowColor'\nimport style from './TagEntityTreeFilterByTags.css'\n\nclass TagEntityTreeFilterByTags extends Component {\n  constructor (props) {\n    super(props)\n\n    this.tagSelectionRef = React.createRef()\n    this.tagSelectionInputRef = React.createRef()\n    this.tagListRef = React.createRef()\n\n    this.state = {\n      showTagsList: true,\n      filterText: ''\n    }\n\n    this.createRenderer = this.createRenderer.bind(this)\n    this.addSelectedTag = this.addSelectedTag.bind(this)\n    this.onTagSelectionClick = this.onTagSelectionClick.bind(this)\n    this.onChangeInputTag = this.onChangeInputTag.bind(this)\n    this.onKeyDownInputTag = this.onKeyDownInputTag.bind(this)\n    this.onRemoveTagItem = this.onRemoveTagItem.bind(this)\n  }\n\n  componentDidMount () {\n    this.focus()\n  }\n\n  createRenderer (tags) {\n    return (index, key) => this.renderTagItem(tags[index])\n  }\n\n  addSelectedTag (tag) {\n    const previousSelectedTags = this.props.selectedTags\n\n    const selectedTags = [\n      ...previousSelectedTags,\n      tag\n    ]\n\n    this.props.onTagSelectChange(selectedTags)\n    this.focus()\n  }\n\n  focus () {\n    if (this.tagSelectionInputRef.current && typeof this.tagSelectionInputRef.current.focus === 'function') {\n      this.tagSelectionInputRef.current.focus()\n    }\n  }\n\n  getTagsToShow (allTags, selectedTags, filterText) {\n    if (selectedTags.length === 0 && filterText === '') {\n      return allTags\n    }\n\n    return allTags.filter((tag) => {\n      let filterPass = true\n\n      if (filterText !== '') {\n        filterPass = tag.name.indexOf(filterText) !== -1\n      }\n\n      if (!filterPass) {\n        return false\n      }\n\n      const foundInSelectedTags = selectedTags.some((selectTag) => {\n        return selectTag.shortid === tag.shortid\n      })\n\n      return !foundInSelectedTags\n    })\n  }\n\n  onTagSelectionClick (ev) {\n    // if the tag selection area is directly clicked\n    // focus the input\n    if (ev.target === this.tagSelectionRef.current) {\n      this.focus()\n    }\n  }\n\n  onChangeInputTag (ev) {\n    this.setState({\n      filterText: ev.target.value\n    })\n  }\n\n  onKeyDownInputTag (ev) {\n    if (ev.defaultPrevented) {\n      return\n    }\n\n    let keyCode = ev.keyCode\n    let inputTag = ev.target\n    let remove = false\n    let enterKey = 13\n    let removeKey = 8\n\n    if (keyCode === enterKey) {\n      ev.preventDefault()\n\n      return this.props.onFilterClose()\n    }\n\n    if (keyCode === removeKey) {\n      remove = true\n    }\n\n    if (remove && inputTag.value === '') {\n      let selectedTags = this.props.selectedTags\n      let selectedTagsLastIndex = selectedTags.length - 1\n\n      ev.preventDefault()\n\n      if (selectedTagsLastIndex >= 0) {\n        this.onRemoveTagItem(selectedTags[selectedTagsLastIndex], selectedTagsLastIndex)\n      }\n    }\n  }\n\n  onRemoveTagItem (tag, tagIndex) {\n    const originalSelectedTags = this.props.selectedTags\n\n    const selectedTags = [\n      ...originalSelectedTags.slice(0, tagIndex),\n      ...originalSelectedTags.slice(tagIndex + 1)\n    ]\n\n    this.props.onTagSelectChange(selectedTags)\n  }\n\n  renderTagItem (tag) {\n    return (\n      <div\n        key={tag.shortid}\n        className={style.tagsListItem}\n        onClick={() => this.addSelectedTag(tag)}\n      >\n        <ShowColor color={tag.color} />\n        &nbsp;\n        <span>{tag.name}</span>\n      </div>\n    )\n  }\n\n  render () {\n    const { showTagsList, filterText } = this.state\n    const { tags, selectedTags } = this.props\n    const tagsToShowInList = this.getTagsToShow(tags, selectedTags, filterText)\n\n    let stylesForTagsList = {}\n    let stylesForInputTag = {}\n\n    if (showTagsList) {\n      stylesForTagsList.display = 'block'\n    } else {\n      stylesForTagsList.display = 'none'\n    }\n\n    if (selectedTags.length === 0) {\n      stylesForInputTag.width = '100%'\n    }\n\n    return (\n      <div className={style.searchTagsContainer}>\n        <div className={style.searchTagsInputBox}>\n          <div ref={this.tagSelectionRef} className={style.tagsSelect} onClick={this.onTagSelectionClick}>\n            <span>\n              {selectedTags.map((tag, tagIndex) => {\n                const tagStyles = {\n                  backgroundColor: tag.color,\n                  borderColor: colorLuminance(tag.color, -0.35),\n                  color: getColorLuminance(tag.color) >= 0.5 ? '#000' : '#fff'\n                }\n\n                return (\n                  <span key={tag.shortid} className={style.tagsSelectItem} style={tagStyles}>\n                    {tag.name}\n                    <a className={style.tagsSelectItemRemove} onClick={() => this.onRemoveTagItem(tag, tagIndex)} />\n                  </span>\n                )\n              })}\n              <input\n                ref={this.tagSelectionInputRef}\n                type='text'\n                placeholder={selectedTags.length === 0 ? 'select a tag' : ''}\n                className={style.searchTags}\n                style={stylesForInputTag}\n                onChange={this.onChangeInputTag}\n                onKeyDown={this.onKeyDownInputTag}\n              />\n            </span>\n          </div>\n        </div>\n        <div\n          ref={this.tagListRef}\n          className={style.tagsListContainer}\n          style={stylesForTagsList}\n        >\n          <div className={style.tagsList}>\n            {tags.length === 0 ? (\n              <div className={style.tagsListEmpty}>\n                No tags registered\n              </div>\n            ) : (\n              <ReactList\n                itemRenderer={this.createRenderer(tagsToShowInList)}\n                length={tagsToShowInList.length}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nTagEntityTreeFilterByTags.defaultProps = {\n  onTagSelectChange: () => {}\n}\n\nexport default TagEntityTreeFilterByTags\n","module.exports = Studio.libraries['react-list'];","import hexToRgb from './hexToRgb'\n\nexport default (hex) => {\n  const rgb = hexToRgb(hex)\n\n  let RsRGB, GsRGB, BsRGB, R, G, B\n\n  RsRGB = rgb.r / 255\n  GsRGB = rgb.g / 255\n  BsRGB = rgb.b / 255\n\n  if (RsRGB <= 0.03928) {\n    R = RsRGB / 12.92\n  } else {\n    R = Math.pow(((RsRGB + 0.055) / 1.055), 2.4)\n  }\n\n  if (GsRGB <= 0.03928) {\n    G = GsRGB / 12.92\n  } else {\n    G = Math.pow(((GsRGB + 0.055) / 1.055), 2.4)\n  }\n\n  if (BsRGB <= 0.03928) {\n    B = BsRGB / 12.92\n  } else {\n    B = Math.pow(((BsRGB + 0.055) / 1.055), 2.4)\n  }\n\n  return (0.2126 * R) + (0.7152 * G) + (0.0722 * B)\n}\n","\nconst shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i\n\nexport default (hex) => {\n  // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n  let fullHex = hex.replace(shorthandRegex, function (m, r, g, b) {\n    return r + r + g + g + b + b\n  })\n\n  let result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(fullHex)\n\n  return result ? {\n    r: parseInt(result[1], 16),\n    g: parseInt(result[2], 16),\n    b: parseInt(result[3], 16)\n  } : null\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchTagsContainer\":\"x-tags-TagEntityTreeFilterByTags-searchTagsContainer\",\"searchTagsInputBox\":\"x-tags-TagEntityTreeFilterByTags-searchTagsInputBox\",\"searchTags\":\"x-tags-TagEntityTreeFilterByTags-searchTags\",\"tagsListContainer\":\"x-tags-TagEntityTreeFilterByTags-tagsListContainer\",\"tagsList\":\"x-tags-TagEntityTreeFilterByTags-tagsList\",\"tagsListEmpty\":\"x-tags-TagEntityTreeFilterByTags-tagsListEmpty\",\"tagsListItem\":\"x-tags-TagEntityTreeFilterByTags-tagsListItem\",\"tagsSelect\":\"x-tags-TagEntityTreeFilterByTags-tagsSelect\",\"tagsSelectItem\":\"x-tags-TagEntityTreeFilterByTags-tagsSelectItem\",\"tagsSelectItemRemove\":\"x-tags-TagEntityTreeFilterByTags-tagsSelectItemRemove\"};","import React, { Component } from 'react'\nimport ShowColor from './ShowColor'\nimport findTagInSet from './findTagInSet'\n\nclass TagEntityTreeItem extends Component {\n  render () {\n    const { entity, entities } = this.props\n    let tags = entity.tags || []\n\n    // for tags, display the color right in the entity tree\n    if (entity.__entitySet === 'tags') {\n      tags = [entity]\n    }\n\n    const tagsLength = tags.length\n\n    return (\n      <div style={{ display: 'inline-block', marginLeft: '0.2rem', marginRight: '0.2rem' }}>\n        {tags.map((tag, tagIndex) => {\n          const tagFound = findTagInSet(entities.tags, tag.shortid) || {}\n\n          return (\n            <span key={tag.shortid} title={tagFound.name}>\n              <ShowColor color={tagFound.color} width={8} height={15} />\n              {(tagIndex !== tagsLength - 1) ? ' ' : null}\n            </span>\n          )\n        })}\n      </div>\n    )\n  }\n}\n\nexport default TagEntityTreeItem\n","import React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\nimport ShowColor from './ShowColor'\nimport findTagInSet from './findTagInSet'\n\nclass TagEntityTreeTagGroupItem extends Component {\n  render () {\n    const { __entitySet } = this.props\n\n    if (__entitySet !== 'tags' && __entitySet !== 'folders') {\n      return null\n    }\n\n    let tags = []\n\n    if (__entitySet === 'tags') {\n      tags.push({ name: this.props.name, shortid: this.props.shortid, color: this.props.color })\n    } else {\n      tags = this.props.tags || []\n\n      tags = tags.map((t) => {\n        return findTagInSet(Studio.getReferences().tags, t.shortid)\n      })\n    }\n\n    const tagsLength = tags.length\n\n    return (\n      <div style={{ display: 'inline-block', marginLeft: '0.2rem', marginRight: '0.2rem' }}>\n        {tags.map((tag, tagIndex) => {\n          if (!tag) {\n            return\n          }\n\n          return (\n            <span key={tag.shortid} title={tag.name}>\n              <ShowColor color={tag.color} width={8} height={15} />\n              {(tagIndex !== tagsLength - 1) ? ' ' : null}\n            </span>\n          )\n        })}\n      </div>\n    )\n  }\n}\n\nexport default TagEntityTreeTagGroupItem\n","\nexport default (entity, entitySets, filterInfo) => {\n  const { tags } = filterInfo\n  const allTagsInEntity = entity.tags || []\n\n  if (tags == null) {\n    return true\n  }\n\n  if (tags.length > 0) {\n    return tags.every((tag) => {\n      return allTagsInEntity.some((tagInEntity) => tagInEntity.shortid === tag.shortid)\n    })\n  }\n\n  return true\n}\n"],"sourceRoot":""}