{"version":3,"file":"main.js","mappings":"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","sources":["webpack://@jsreport/jsreport-components/external var \"Studio\"","webpack://@jsreport/jsreport-components/external var \"Studio.libraries['react']\"","webpack://@jsreport/jsreport-components/./studio/NewComponentModal.js","webpack://@jsreport/jsreport-components/./studio/ComponentProperties.js","webpack://@jsreport/jsreport-components/./studio/ComponentPreview.js","webpack://@jsreport/jsreport-components/./studio/PreviewComponentToolbar.js","webpack://@jsreport/jsreport-components/webpack/bootstrap","webpack://@jsreport/jsreport-components/webpack/runtime/compat get default export","webpack://@jsreport/jsreport-components/webpack/runtime/define property getters","webpack://@jsreport/jsreport-components/webpack/runtime/hasOwnProperty shorthand","webpack://@jsreport/jsreport-components/webpack/runtime/make namespace object","webpack://@jsreport/jsreport-components/./studio/main_dev.js"],"sourcesContent":["module.exports = Studio;","module.exports = Studio.libraries['react'];","/* import PropTypes from 'prop-types' */\nimport React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\n\nfunction getDefaultEngine () {\n  const found = Studio.engines.find((e) => e === 'handlebars')\n\n  if (found) {\n    return found\n  }\n\n  return Studio.engines[0]\n}\n\nclass NewComponentModal extends Component {\n  constructor (props) {\n    super(props)\n\n    this.nameInputRef = React.createRef()\n    this.engineInputRef = React.createRef()\n\n    this.state = {\n      error: null,\n      processing: false\n    }\n  }\n\n  // the modal component for some reason after open focuses the panel itself\n  componentDidMount () {\n    setTimeout(() => this.nameInputRef.current.focus(), 0)\n  }\n\n  handleKeyPress (e) {\n    if (e.key === 'Enter') {\n      this.submit(e.target.value)\n    }\n  }\n\n  async submit (val) {\n    if (this.state.processing) {\n      return\n    }\n\n    const name = val || this.nameInputRef.current.value\n\n    const entity = {\n      ...this.props.options.defaults,\n      name,\n      engine: this.engineInputRef.current.value,\n      __entitySet: 'components'\n    }\n\n    this.setState({ processing: true })\n\n    try {\n      await Studio.api.post('/studio/validate-entity-name', {\n        data: {\n          _id: this.props.options.cloning === true ? undefined : entity._id,\n          name: name,\n          entitySet: 'components',\n          folderShortid: entity.folder != null ? entity.folder.shortid : null\n        }\n      }, true)\n    } catch (e) {\n      this.setState({\n        error: e.message,\n        processing: false\n      })\n\n      return\n    }\n\n    this.setState({\n      error: null,\n      processing: false\n    })\n\n    this.props.close()\n    Studio.openNewTab({\n      entity,\n      entitySet: 'components',\n      name\n    })\n  }\n\n  render () {\n    const { error, processing } = this.state\n\n    return (\n      <div>\n        <div className='form-group'>\n          <label>New component</label>\n        </div>\n        <div className='form-group'>\n          <label>name</label>\n          <input\n            type='text'\n            placeholder='name...'\n            ref={this.nameInputRef}\n            onKeyPress={(e) => this.handleKeyPress(e)}\n          />\n        </div>\n        <div className='form-group'>\n          <label>engine</label>\n          <select\n            defaultValue={getDefaultEngine()}\n            ref={this.engineInputRef}\n          >\n            {Studio.engines.map((e) => <option key={e} value={e}>{e}</option>)}\n          </select>\n        </div>\n        <div className='form-group'>\n          <span\n            style={{\n              color: 'red',\n              display: error ? 'block' : 'none',\n              marginLeft: 'auto',\n              marginRight: 'auto',\n              maxWidth: '360px'\n            }}\n          >\n            {error}\n          </span>\n        </div>\n        <div className='button-bar'>\n          <button className='button confirmation' disabled={processing} onClick={() => this.submit()}>Ok</button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default NewComponentModal\n","/* import PropTypes from 'prop-types' */\nimport React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\n\nexport default class ComponentProperties extends Component {\n  renderEngines () {\n    const { entity, onChange } = this.props\n\n    return (\n      <select value={entity.engine} onChange={(v) => onChange({ _id: entity._id, engine: v.target.value })}>\n        {Studio.engines.map((e) => <option key={e} value={e}>{e}</option>)}\n      </select>\n    )\n  }\n\n  static title (entity) {\n    return entity.engine\n  }\n\n  render () {\n    if (this.props.entity.__entitySet !== 'components') {\n      return <div />\n    }\n\n    return (\n      <div className='properties-section'>\n        <div className='form-group'><label>engine</label> {this.renderEngines()}</div>\n      </div>\n    )\n  }\n}\n","import { useMemo } from 'react'\nimport Studio from 'jsreport-studio'\n\nconst FramePreview = Studio.sharedComponents.FramePreview\n\nconst ComponentPreview = (props) => {\n  const { data } = props\n\n  const src = useMemo(() => {\n    if (data.type == null && data.content == null) {\n      return null\n    }\n\n    const blob = new Blob([data.content], { type: data.type })\n    return window.URL.createObjectURL(blob)\n  }, [data.type, data.content])\n\n  const styles = useMemo(() => {\n    if (data.type !== 'text/html') {\n      return {}\n    }\n\n    // match default browser styles\n    return {\n      backgroundColor: '#fff',\n      color: '#000'\n    }\n  }, [data.type])\n\n  return (\n    <FramePreview\n      src={src}\n      styles={styles}\n    />\n  )\n}\n\nexport default ComponentPreview\n","import { useState, useRef, useCallback, useEffect } from 'react'\nimport Studio from 'jsreport-studio'\n\nconst PreviewComponentToolbar = (props) => {\n  const [isRunning, setIsRunning] = useState(false)\n  const stopPreviewRef = useRef(null)\n  const entity = props.tab != null && props.tab.entity != null ? props.tab.entity : undefined\n\n  const previewComponent = useCallback(function previewComponent (componentShortid, componentName) {\n    if (isRunning) {\n      return\n    }\n\n    setIsRunning(true)\n    Studio.startProgress()\n\n    const previewId = Studio.preview({\n      type: 'component',\n      data: {}\n    })\n\n    const componentPayload = {\n      component: {\n        shortid: componentShortid,\n        content: entity.content || ''\n      }\n    }\n\n    if (entity.engine != null) {\n      componentPayload.component.engine = entity.engine\n    }\n\n    if (entity.helpers != null) {\n      componentPayload.component.helpers = entity.helpers\n    }\n\n    if (entity.data && entity.data.shortid) {\n      // try to fill request.data from the active open tab with sample data\n      const dataDetails = Studio.getAllEntities()\n        .filter((d) => d.shortid === entity.data.shortid && d.__entitySet === 'data' && (d.__isLoaded || d.__isDirty || d.__isNew))\n\n      if (dataDetails.length > 0) {\n        componentPayload.data = dataDetails[0].dataJson ? JSON.parse(dataDetails[0].dataJson) : {}\n      }\n    }\n\n    const componentUrl = Studio.resolveUrl('/api/component')\n\n    const previewController = new AbortController()\n\n    stopPreviewRef.current = () => {\n      previewController.abort()\n    }\n\n    window.fetch(componentUrl, {\n      method: 'POST',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(componentPayload),\n      signal: previewController.signal\n    }).then((response) => {\n      let contentType = ''\n\n      if (response.headers != null) {\n        contentType = response.headers.get('Content-Type') || ''\n      }\n\n      let contentPromise\n\n      if (response.status !== 200) {\n        if (contentType.indexOf('application/json') === 0) {\n          contentPromise = response.json()\n        } else {\n          contentPromise = response.text()\n        }\n      } else {\n        contentPromise = response.text()\n      }\n\n      return contentPromise.then((content) => ({\n        status: response.status,\n        content\n      }))\n    }).then(({ status, content }) => {\n      if (status !== 200) {\n        let notOkError\n\n        if (typeof content !== 'string' && content.message && content.stack) {\n          notOkError = new Error(content.message)\n          notOkError.stack = content.stack\n        } else {\n          notOkError = new Error(`Got not ok response, status: ${status}, message: ${content}`)\n        }\n\n        throw notOkError\n      }\n\n      setIsRunning(false)\n      Studio.stopProgress()\n      stopPreviewRef.current = null\n\n      Studio.updatePreview(previewId, {\n        data: {\n          type: 'text/html',\n          content\n        },\n        completed: true\n      })\n    }).catch((err) => {\n      setIsRunning(false)\n      Studio.stopProgress()\n      stopPreviewRef.current = null\n\n      Studio.updatePreview(previewId, {\n        data: {\n          type: 'text/plain',\n          content: `Component${componentName != null ? ` \"${componentName}\"` : ''} preview failed.\\n\\n${err.message}\\n${err.stack || ''}`\n        },\n        completed: true\n      })\n    })\n  }, [entity, isRunning])\n\n  const stopPreviewComponent = useCallback(function stopPreviewComponent () {\n    if (stopPreviewRef.current != null) {\n      stopPreviewRef.current()\n    }\n  })\n\n  const handleEarlyShortcut = useCallback(function handleEarlyShortcut (e) {\n    if (e.which === 120 && entity && entity.__entitySet === 'components') {\n      e.preventDefault()\n      e.stopPropagation()\n\n      if (isRunning) {\n        stopPreviewComponent()\n      } else {\n        previewComponent(entity.shortid, entity.name)\n      }\n\n      return false\n    }\n  }, [previewComponent, isRunning, entity])\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleEarlyShortcut, true)\n\n    return () => {\n      window.removeEventListener('keydown', handleEarlyShortcut, true)\n    }\n  }, [handleEarlyShortcut])\n\n  if (!props.tab || !props.tab.entity || props.tab.entity.__entitySet !== 'components') {\n    return <span />\n  }\n\n  return (\n    <div\n      title='Run and preview component (F9)'\n      className='toolbar-button'\n      onClick={() => {\n        if (isRunning) {\n          stopPreviewComponent()\n        } else {\n          previewComponent(props.tab.entity.shortid, props.tab.entity.name)\n        }\n      }}\n    >\n      <i className={`fa fa-${isRunning ? 'stop' : 'eye'}`} />Component\n    </div>\n  )\n}\n\nexport default PreviewComponentToolbar\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import NewComponentModal from './NewComponentModal'\nimport ComponentProperties from './ComponentProperties'\nimport ComponentPreview from './ComponentPreview'\nimport PreviewComponentToolbar from './PreviewComponentToolbar'\nimport Studio from 'jsreport-studio'\n\nStudio.addEntitySet({\n  name: 'components',\n  faIcon: 'fa-puzzle-piece',\n  visibleName: 'component',\n  onNew: (options) => Studio.openModal(NewComponentModal, options),\n  entityTreePosition: 800\n})\n\nStudio.entityEditorComponentKeyResolvers.push((entity) => {\n  if (entity.__entitySet === 'components') {\n    return {\n      key: 'templates',\n      entity\n    }\n  }\n})\n\nStudio.addPropertiesComponent(ComponentProperties.title, ComponentProperties, (entity) => entity.__entitySet === 'components')\nStudio.addToolbarComponent(PreviewComponentToolbar)\n\nStudio.addPreviewComponent('component', ComponentPreview)\n\nStudio.textEditorInitializeListeners.push(({ monaco }) => {\n  registerHandlebarsLanguage(monaco)\n})\n\n/**\n * We implement monaco registerLinkProvider & registerLinkOpener for Handlebars.\n * This allows to Ctrl+Click (or Cmd+Click on Mac) on {{component \"path/to/component\"}} expressions\n */\nfunction registerHandlebarsLanguage (monaco) {\n  const languageId = 'handlebars'\n  const handlebarComponentRegex = /\\{\\{\\s*component\\s+([\"'])([^\"']+)\\1[^}]*?\\}\\}/g\n  const handlebarLinkScheme = 'jsreport-studio'\n  const handlebarLinkAuthority = 'handlebars-link'\n\n  monaco.languages.registerLinkProvider(languageId, {\n    provideLinks: (model) => {\n      const links = []\n      const lines = model.getLinesContent()\n\n      for (let lineNumber = 0; lineNumber < lines.length; lineNumber++) {\n        let match\n        while ((match = handlebarComponentRegex.exec(lines[lineNumber])) !== null) {\n          const path = match[2]\n          const entityPath = Studio.resolveEntityPath(Studio.getActiveEntity())\n          const parentPath = `/${entityPath.split('/').slice(1, -1).join('/')}`\n\n          const { entity: targetEntity } = Studio.resolveEntityFromPath(path, 'components', { currentPath: parentPath })\n\n          if (targetEntity?.__entitySet !== 'components') {\n            continue\n          }\n\n          // Add link to the editor model\n          const url = `${handlebarLinkScheme}://${handlebarLinkAuthority}/${encodeURIComponent(path)}`\n          const startColumn = match.index + match[0].indexOf(path)\n          const endColumn = startColumn + path.length\n          links.push({\n            range: new monaco.Range(lineNumber + 1, startColumn + 1, lineNumber + 1, endColumn + 1),\n            url: url\n          })\n        }\n      }\n      return { links }\n    }\n  })\n\n  monaco.editor.registerLinkOpener({\n    open: (url) => {\n      if (!(url.scheme === handlebarLinkScheme && url.authority === handlebarLinkAuthority)) {\n        return false\n      }\n\n      const entityPath = Studio.resolveEntityPath(Studio.getActiveEntity())\n      const parentPath = `/${entityPath.split('/').slice(1, -1).join('/')}`\n      const { entity: targetEntity } = Studio.resolveEntityFromPath(url.path.slice(1), 'components', { currentPath: parentPath })\n\n      if (!targetEntity) {\n        return false\n      }\n\n      Studio.openTab({ _id: targetEntity._id })\n\n      return true\n    }\n  })\n}\n"],"names":["React","Component","Studio","getDefaultEngine","found","engines","find","e","NewComponentModal","constructor","props","nameInputRef","createRef","engineInputRef","state","error","processing","componentDidMount","setTimeout","current","focus","handleKeyPress","key","submit","target","value","val","name","entity","options","defaults","engine","__entitySet","setState","api","post","data","_id","cloning","undefined","entitySet","folderShortid","folder","shortid","message","close","openNewTab","render","createElement","className","type","placeholder","ref","onKeyPress","defaultValue","map","style","color","display","marginLeft","marginRight","maxWidth","disabled","onClick","ComponentProperties","renderEngines","onChange","v","title","useMemo","FramePreview","sharedComponents","ComponentPreview","src","content","blob","Blob","window","URL","createObjectURL","styles","backgroundColor","useState","useRef","useCallback","useEffect","PreviewComponentToolbar","isRunning","setIsRunning","stopPreviewRef","tab","previewComponent","componentShortid","componentName","startProgress","previewId","preview","componentPayload","component","helpers","dataDetails","getAllEntities","filter","d","__isLoaded","__isDirty","__isNew","length","dataJson","JSON","parse","componentUrl","resolveUrl","previewController","AbortController","abort","fetch","method","cache","headers","body","stringify","signal","then","response","contentType","get","contentPromise","status","indexOf","json","text","_ref","notOkError","stack","Error","stopProgress","updatePreview","completed","catch","err","stopPreviewComponent","handleEarlyShortcut","which","preventDefault","stopPropagation","addEventListener","removeEventListener","addEntitySet","faIcon","visibleName","onNew","openModal","entityTreePosition","entityEditorComponentKeyResolvers","push","addPropertiesComponent","addToolbarComponent","addPreviewComponent","textEditorInitializeListeners","monaco","registerHandlebarsLanguage","languageId","handlebarComponentRegex","handlebarLinkScheme","handlebarLinkAuthority","languages","registerLinkProvider","provideLinks","model","links","lines","getLinesContent","lineNumber","match","exec","path","entityPath","resolveEntityPath","getActiveEntity","parentPath","split","slice","join","targetEntity","resolveEntityFromPath","currentPath","url","encodeURIComponent","startColumn","index","endColumn","range","Range","editor","registerLinkOpener","open","scheme","authority","openTab"],"sourceRoot":""}