{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"Studio.libraries['react']\"","webpack:///external \"Studio\"","webpack:///./studio/AssetUploadButton.js","webpack:///./studio/scopeOptions.js","webpack:///./studio/main_dev.js","webpack:///./studio/AssetEditor.js","webpack:///external \"Studio.libraries['superagent']\"","webpack:///C:/work/jsreport/jsreport/node_modules/react-copy-to-clipboard/lib/index.js","webpack:///C:/work/jsreport/jsreport/node_modules/react-copy-to-clipboard/lib/Component.js","webpack:///C:/work/jsreport/jsreport/node_modules/copy-to-clipboard/index.js","webpack:///C:/work/jsreport/jsreport/node_modules/toggle-selection/index.js","webpack:///./studio/AssetEditor.css","webpack:///./studio/NewAssetModal.js","webpack:///./studio/AssetProperties.js"],"names":["_fileUploadButton","AssetUploadButton","props","inputFileRef","React","createRef","e","target","files","length","assetDefaults","targetAsset","activateNewTab","onNewEntityCallback","uploadCallback","file","reader","FileReader","onloadend","current","value","type","Studio","workspaces","save","asset","Object","assign","content","result","substring","indexOf","name","api","post","data","response","__entitySet","addExistingEntity","openTab","updateEntity","patch","_id","link","loadEntity","onerror","errMsg","Error","alert","readAsDataURL","defaults","opts","targetAssetIdAndName","tab","entity","dispatchEvent","MouseEvent","view","window","bubbles","cancelable","display","upload","renderUpload","openFileDialog","undefined","Component","key","title","desc","addEntitySet","faIcon","visibleName","onNew","options","openModal","NewAssetModal","referenceAttributes","entityTreePosition","sharedComponents","addEditorComponent","AssetEditor","addToolbarComponent","addPropertiesComponent","AssetProperties","entityTreeIconResolvers","push","parts","split","extension","isSharedHelper","entityTreeDropResolvers","dragAndDropNativeTypes","FILE","handler","draggedItem","dragOverContext","dropComplete","targetInfo","shortid","containerTargetEntity","errors","test","Promise","resolve","reject","fileName","assetFile","folder","setTimeout","collapseEntity","parents","self","assetsUploadedError","map","message","join","apiFailed","binaryExtensions","getTextFromApi","path","request","superagent","get","resolveUrl","end","err","text","toString","state","initialLoading","helpersActive","previewOpen","previewLoading","previewLoadFinish","bind","setState","saveEntity","responseType","ab","str","String","fromCharCode","apply","Uint8Array","fixedStr","decodeURIComponent","escape","btoa","unescape","encodeURIComponent","prevProps","match","embeddingCode","isImage","resolveEntityPath","isFont","getFormat","isOfficeFile","lazyPreview","previewEnabled","extensions","assets","officePreview","enabled","onPreview","getLazyPreviewStatus","getPreviewEnabledStatus","showWarning","getSettingValueByKey","setSetting","clearPreview","preview","startProgress","stopProgress","done","OpenUpload","helpersEntity","displayName","icon","onDownload","onUpload","getEmbeddingCode","style","toolbarContainer","toolbarRow","toolbarAssetName","ev","preventDefault","downloadEl","document","createElement","href","click","cb","wasOpen","change","store","dispatch","entities","actions","flushUpdates","margin","emptyMessage","getPreviewContent","onUpdate","v","helpers","padding","overflow","Date","getTime","newStyle","appendChild","createTextNode","head","fontFamily","isPdf","height","officeSrc","includes","renderBinary","mode","forceUpdate","atob","renderEditorToolbar","renderEditorContent","defaultProps","nameRef","linkRef","isLink","scope","createAsset","focus","error","fragments","sharedHelpersScope","onNewEntity","close","currentScopeValue","currentScopeOption","scopeOptions","find","opt","handleKeyPress","allowAssetsLinkedToFiles","checked","newScope","color","opacity","OpenUploadNew","normalizeScope","onChange","suffix"],"mappings":"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EAAE,EAAE,uDAAuD;;AAE/X,gCAAgC,4EAA4E,iBAAiB,UAAU,GAAG,8BAA8B;;AAExK,2CAA2C,kBAAkB,kCAAkC,qEAAqE,EAAE,EAAE,OAAO,kBAAkB,EAAE,YAAY;;AAE/M;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,uEAAuE,aAAa;AACpF;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,OAAO;;;AAGP;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,kEAAkE;AAClE;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA,CAAC,E;;;;;;;AC7GY;;AAEb,sBAAsB,mBAAO,CAAC,EAAkB;;AAEhD;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,IAAI;;AAE/C;AACA;AACA,4BAA4B,UAAU;AACtC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA,SAAS,OAAO;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;AC/GA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,0BAA0B;AAC3C;AACA;;AAEA,yCAAyC;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","module.exports = Studio.libraries['react'];","module.exports = Studio;","import React, { Component } from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nlet _fileUploadButton\r\n\r\nclass AssetUploadButton extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.inputFileRef = React.createRef()\r\n  }\r\n\r\n  // we need to have global action in main_dev which is triggered when users clicks on + on images\r\n  // this triggers invisible button in the toolbar\r\n  static OpenUpload (opts) {\r\n    _fileUploadButton.openFileDialog('edit', undefined, opts)\r\n  }\r\n\r\n  static OpenUploadNew (defaults, opts) {\r\n    _fileUploadButton.openFileDialog('new', defaults, opts)\r\n  }\r\n\r\n  componentDidMount () {\r\n    _fileUploadButton = this\r\n  }\r\n\r\n  upload (e) {\r\n    if (!e.target.files.length) {\r\n      return\r\n    }\r\n\r\n    const assetDefaults = e.target.assetDefaults\r\n    const targetAsset = e.target.targetAsset\r\n    const activateNewTab = e.target.activateNewTab\r\n    const onNewEntityCallback = e.target.onNewEntityCallback\r\n    const uploadCallback = e.target.uploadCallback\r\n\r\n    delete e.target.assetDefaults\r\n    delete e.target.targetAsset\r\n    delete e.target.uploadCallback\r\n\r\n    const file = e.target.files[0]\r\n    const reader = new FileReader()\r\n\r\n    reader.onloadend = async () => {\r\n      this.inputFileRef.current.value = ''\r\n\r\n      if (this.type === 'new') {\r\n        if (Studio.workspaces) {\r\n          await Studio.workspaces.save()\r\n        }\r\n\r\n        let asset = {}\r\n\r\n        if (assetDefaults != null) {\r\n          asset = Object.assign(asset, assetDefaults)\r\n        }\r\n\r\n        asset = Object.assign(asset, {\r\n          content: reader.result.substring(reader.result.indexOf('base64,') + 'base64,'.length),\r\n          name: file.name\r\n        })\r\n\r\n        const response = await Studio.api.post('/odata/assets', {\r\n          data: asset\r\n        })\r\n\r\n        response.__entitySet = 'assets'\r\n\r\n        Studio.addExistingEntity(response)\r\n        Studio.openTab(Object.assign({}, response), activateNewTab)\r\n\r\n        if (onNewEntityCallback) {\r\n          onNewEntityCallback(response)\r\n        }\r\n      }\r\n\r\n      if (this.type === 'edit') {\r\n        if (Studio.workspaces) {\r\n          Studio.updateEntity({\r\n            name: targetAsset.name,\r\n            content: reader.result.substring(reader.result.indexOf('base64,') + 'base64,'.length)\r\n          })\r\n\r\n          await Studio.workspaces.save()\r\n        } else {\r\n          await Studio.api.patch(`/odata/assets(${targetAsset._id})`, {\r\n            data: {\r\n              content: reader.result.substring(reader.result.indexOf('base64,') + 'base64,'.length),\r\n              link: null\r\n            }\r\n          })\r\n          Studio.loadEntity(targetAsset._id, true)\r\n        }\r\n      }\r\n\r\n      if (uploadCallback) {\r\n        uploadCallback()\r\n      }\r\n    }\r\n\r\n    reader.onerror = function () {\r\n      const errMsg = 'There was an error reading the file!'\r\n\r\n      if (uploadCallback) {\r\n        uploadCallback(new Error(errMsg))\r\n      }\r\n\r\n      alert(errMsg)\r\n    }\r\n\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  openFileDialog (type, defaults, opts = {}) {\r\n    const targetAssetIdAndName = opts.targetAsset\r\n\r\n    this.type = type\r\n\r\n    if (opts.activateNewTab != null) {\r\n      this.inputFileRef.current.activateNewTab = opts.activateNewTab\r\n    } else {\r\n      delete this.inputFileRef.current.activateNewTab\r\n    }\r\n\r\n    if (defaults) {\r\n      this.inputFileRef.current.assetDefaults = defaults\r\n    } else {\r\n      delete this.inputFileRef.current.assetDefaults\r\n    }\r\n\r\n    if (targetAssetIdAndName) {\r\n      this.inputFileRef.current.targetAsset = targetAssetIdAndName\r\n    } else if (type !== 'new') {\r\n      this.inputFileRef.current.targetAsset = {\r\n        _id: this.props.tab.entity._id,\r\n        name: this.props.tab.entity.name\r\n      }\r\n    }\r\n\r\n    if (opts.onNewEntityCallback) {\r\n      this.inputFileRef.current.onNewEntityCallback = opts.onNewEntityCallback\r\n    } else {\r\n      delete this.inputFileRef.current.onNewEntityCallback\r\n    }\r\n\r\n    if (opts.uploadCallback) {\r\n      this.inputFileRef.current.uploadCallback = opts.uploadCallback\r\n    } else {\r\n      delete this.inputFileRef.current.uploadCallback\r\n    }\r\n\r\n    this.inputFileRef.current.dispatchEvent(new MouseEvent('click', {\r\n      view: window,\r\n      bubbles: false,\r\n      cancelable: true\r\n    }))\r\n  }\r\n\r\n  renderUpload () {\r\n    return (\r\n      <input\r\n        type='file'\r\n        key='file'\r\n        ref={this.inputFileRef}\r\n        style={{ display: 'none' }}\r\n        onChange={(e) => this.upload(e)}\r\n      />\r\n    )\r\n  }\r\n\r\n  render () {\r\n    return this.renderUpload(true)\r\n  }\r\n}\r\n\r\nexport default AssetUploadButton\r\n","export default [{\r\n  key: 'global',\r\n  title: 'global',\r\n  value: 'global',\r\n  desc: 'helpers in the asset will be attached to all templates'\r\n}, {\r\n  key: 'folder',\r\n  title: 'folder',\r\n  value: 'folder',\r\n  desc: 'helpers in the asset will be attached to all templates in the same folder hierarchy'\r\n}]\r\n","import AssetEditor from './AssetEditor.js'\r\nimport AssetUploadButton from './AssetUploadButton.js'\r\nimport NewAssetModal from './NewAssetModal.js'\r\nimport AssetProperties from './AssetProperties.js'\r\nimport Studio from 'jsreport-studio'\r\n\r\nStudio.addEntitySet({\r\n  name: 'assets',\r\n  faIcon: 'fa-file',\r\n  visibleName: 'asset',\r\n  onNew: (options) => Studio.openModal(NewAssetModal, options),\r\n  referenceAttributes: ['isSharedHelper', 'sharedHelpersScope'],\r\n  entityTreePosition: 700\r\n})\r\n\r\nStudio.sharedComponents.NewAssetModal = NewAssetModal\r\nStudio.addEditorComponent('assets', AssetEditor)\r\n\r\nStudio.addToolbarComponent(AssetUploadButton)\r\nStudio.addPropertiesComponent(AssetProperties.title, AssetProperties, (entity) => entity.__entitySet === 'assets')\r\n\r\nStudio.entityTreeIconResolvers.push((entity) => {\r\n  if (entity.__entitySet !== 'assets') {\r\n    return\r\n  }\r\n\r\n  const parts = entity.name.split('.')\r\n\r\n  if (parts.length === 1) {\r\n    return\r\n  }\r\n\r\n  const extension = parts[parts.length - 1]\r\n\r\n  switch (extension) {\r\n    case 'html': return 'fa-html5'\r\n    case 'jpg':\r\n    case 'jpeg':\r\n    case 'png':\r\n    case 'gif':\r\n    case 'svg': return 'fa-camera'\r\n    case 'js': return entity.isSharedHelper ? 'fa-cogs' : 'fa-cog'\r\n    case 'css': return 'fa-css3'\r\n    default: return 'fa-file-o '\r\n  }\r\n})\r\n\r\nStudio.entityTreeDropResolvers.push({\r\n  type: Studio.dragAndDropNativeTypes.FILE,\r\n  async handler ({\r\n    draggedItem,\r\n    dragOverContext,\r\n    dropComplete\r\n  }) {\r\n    const files = draggedItem.files\r\n\r\n    const targetInfo = {\r\n      shortid: null\r\n    }\r\n\r\n    if (dragOverContext && dragOverContext.containerTargetEntity) {\r\n      targetInfo.shortid = dragOverContext.containerTargetEntity.shortid\r\n    }\r\n\r\n    const errors = []\r\n\r\n    for (const file of files) {\r\n      if (\r\n        /\\.zip$/.test(file.name) ||\r\n        /\\.jsrexport$/.test(file.name)\r\n      ) {\r\n        continue\r\n      }\r\n\r\n      try {\r\n        const assetFile = await new Promise((resolve, reject) => {\r\n          const fileName = file.name\r\n          const reader = new FileReader()\r\n\r\n          reader.onloadend = async () => {\r\n            resolve({\r\n              name: fileName,\r\n              content: reader.result.substring(reader.result.indexOf('base64,') + 'base64,'.length)\r\n            })\r\n          }\r\n\r\n          reader.onerror = function () {\r\n            const errMsg = `There was an error reading the file \"${fileName}\"`\r\n            reject(errMsg)\r\n          }\r\n\r\n          reader.readAsDataURL(file)\r\n        })\r\n\r\n        if (targetInfo.shortid != null) {\r\n          assetFile.folder = {\r\n            shortid: targetInfo.shortid\r\n          }\r\n        }\r\n\r\n        const response = await Studio.api.post('/odata/assets', {\r\n          data: assetFile\r\n        }, true)\r\n\r\n        response.__entitySet = 'assets'\r\n\r\n        Studio.addExistingEntity(response)\r\n        Studio.openTab(Object.assign({}, response))\r\n\r\n        // delay the collapsing a bit to avoid showing ugly transition of collapsed -> uncollapsed\r\n        setTimeout(() => {\r\n          Studio.collapseEntity({ shortid: response.shortid }, false, { parents: true, self: false })\r\n        }, 200)\r\n      } catch (e) {\r\n        errors.push(e)\r\n      }\r\n    }\r\n\r\n    dropComplete()\r\n\r\n    if (errors.length > 0) {\r\n      const assetsUploadedError = new Error(`Could not complete asset upload${files.length > 1 ? ' of some files' : ''}.\\n\\n${errors.map((e) => e.message).join('\\n')}`)\r\n      Studio.apiFailed(assetsUploadedError)\r\n    }\r\n  }\r\n})\r\n","import React, { Component } from 'react'\r\nimport AssetUploadButton from './AssetUploadButton.js'\r\nimport Studio, { FramePreview, TextEditor } from 'jsreport-studio'\r\nimport superagent from 'superagent'\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\r\nimport binaryExtensions from 'binary-extensions'\r\nimport style from './AssetEditor.css'\r\n\r\nbinaryExtensions.push('p12')\r\n\r\n// Studio.api currently always open dialogs on failures and that is what we don't want, so arbitrary implementaiton here\r\nconst getTextFromApi = (path) => {\r\n  return new Promise((resolve, reject) => {\r\n    const request = superagent.get(Studio.resolveUrl(path))\r\n    request.end((err, { text } = {}) => err ? reject(new Error(text || err.toString())) : resolve(text))\r\n  })\r\n}\r\n\r\nclass AssetEditor extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      initialLoading: true,\r\n      helpersActive: false,\r\n      previewOpen: false,\r\n      previewLoading: false\r\n    }\r\n\r\n    this.previewLoadFinish = this.previewLoadFinish.bind(this)\r\n  }\r\n\r\n  async componentDidMount () {\r\n    const { entity } = this.props\r\n\r\n    if (!entity) {\r\n      return this.setState({\r\n        initialLoading: false\r\n      })\r\n    }\r\n\r\n    let content = entity.content\r\n\r\n    if (entity.link) {\r\n      await Studio.saveEntity(entity._id)\r\n      const ab = await Studio.api.get(`assets/${entity._id}/content`, { responseType: 'arraybuffer' })\r\n      const str = String.fromCharCode.apply(null, new Uint8Array(ab))\r\n      const fixedStr = decodeURIComponent(escape(str))\r\n      content = btoa(unescape(encodeURIComponent(fixedStr)))\r\n    }\r\n\r\n    this.setState({ content, initialLoading: false })\r\n  }\r\n\r\n  async componentDidUpdate (prevProps) {\r\n    const { entity } = this.props\r\n\r\n    if (!entity) {\r\n      return\r\n    }\r\n\r\n    if (entity.link && (!this.state.link || prevProps.entity.link !== entity.link)) {\r\n      try {\r\n        const link = await getTextFromApi(`assets/link/${encodeURIComponent(entity.link)}`)\r\n        this.setState({ link: link })\r\n      } catch (e) {\r\n        this.setState({ link: e.message })\r\n      }\r\n    }\r\n  }\r\n\r\n  isOfficeFile (entity) {\r\n    if (entity == null) { return false }\r\n    return entity.name.match(/\\.(docx|xlsx|pptx)$/) != null\r\n  }\r\n\r\n  isImage (entity) {\r\n    if (entity == null) { return false }\r\n    return entity.name.match(/\\.(jpeg|jpg|gif|png|svg)$/) != null\r\n  }\r\n\r\n  isFont (entity) {\r\n    if (entity == null) { return false }\r\n    return entity.name.match(/\\.(otf|woff|ttf|eot|woff2)$/) != null\r\n  }\r\n\r\n  isPdf (entity) {\r\n    if (entity == null) { return false }\r\n    return entity.name.match(/\\.(pdf)$/) != null\r\n  }\r\n\r\n  getFormat (extension) {\r\n    switch (extension) {\r\n      case 'ttf': return 'truetype'\r\n      case 'woff2': return 'woff2'\r\n      case 'eot': return 'embedded-opentype'\r\n      default: return 'woff'\r\n    }\r\n  }\r\n\r\n  getEmbeddingCode (entity) {\r\n    if (entity == null) { return '' }\r\n\r\n    const parts = entity.name.split('.')\r\n    const extension = parts[parts.length - 1]\r\n\r\n    if (this.props.embeddingCode != null) {\r\n      return this.props.embeddingCode\r\n    }\r\n\r\n    if (this.isImage(entity)) {\r\n      return `<img src=\"{{asset \"${Studio.resolveEntityPath(entity)}\" \"dataURI\"}}\" />`\r\n    }\r\n\r\n    if (this.isFont(entity)) {\r\n      return `@font-face {\r\n  font-family: '${parts[0]}';\r\n  src: url({{asset \"${Studio.resolveEntityPath(entity)}\" \"dataURI\"}});\r\n  format('${this.getFormat(extension)}');\r\n}`\r\n    }\r\n\r\n    if (this.isOfficeFile(entity)) {\r\n      return `{{asset \"${Studio.resolveEntityPath(entity)}\" \"base64\"}}`\r\n    }\r\n\r\n    return `{{asset \"${Studio.resolveEntityPath(entity)}\"}}`\r\n  }\r\n\r\n  getLazyPreviewStatus (entity) {\r\n    if (this.props.lazyPreview != null) {\r\n      return this.props.lazyPreview\r\n    }\r\n\r\n    if (this.isOfficeFile(entity)) {\r\n      return true\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  getPreviewEnabledStatus (entity) {\r\n    if (this.props.previewEnabled != null) {\r\n      return this.props.previewEnabled\r\n    }\r\n\r\n    if (this.isOfficeFile(entity)) {\r\n      return Studio.extensions.assets.options.officePreview.enabled !== false\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  preview (entity) {\r\n    const { previewOpen } = this.state\r\n    const { onPreview } = this.props\r\n    const lazyPreview = this.getLazyPreviewStatus(entity)\r\n    const previewEnabled = this.getPreviewEnabledStatus(entity)\r\n\r\n    if (!lazyPreview || !previewEnabled) {\r\n      return\r\n    }\r\n\r\n    if (onPreview) {\r\n      onPreview(entity)\r\n    } else if (this.isOfficeFile(entity)) {\r\n      if (\r\n        Studio.extensions.assets.options.officePreview.showWarning !== false &&\r\n        Studio.getSettingValueByKey('office-preview-informed', false) === false\r\n      ) {\r\n        Studio.setSetting('office-preview-informed', true)\r\n\r\n        Studio.openModal(() => (\r\n          <div>\r\n            We need to upload your office asset to our publicly hosted server to be able to use\r\n            Office Online Service for previewing here in the studio. You can disable it in the configuration, see\r\n            <a\r\n              href='https://jsreport.net/learn/xlsx#preview-in-studio' target='_blank' rel='noopener noreferrer'\r\n            >\r\n              the docs for details\r\n            </a>.\r\n          </div>\r\n        ))\r\n      }\r\n    }\r\n\r\n    if (previewOpen) {\r\n      this.clearPreview(() => {\r\n        this.preview(entity)\r\n      })\r\n    } else {\r\n      Studio.startProgress()\r\n\r\n      this.setState({\r\n        previewLoading: true,\r\n        previewOpen: true,\r\n        helpersActive: false\r\n      })\r\n    }\r\n  }\r\n\r\n  previewLoadFinish () {\r\n    Studio.stopProgress()\r\n\r\n    this.setState({\r\n      previewLoading: false\r\n    })\r\n  }\r\n\r\n  clearPreview (done) {\r\n    this.setState({\r\n      previewOpen: false\r\n    }, () => done && done())\r\n  }\r\n\r\n  renderBinary (entity) {\r\n    return (\r\n      <div className='custom-editor'>\r\n        <div>\r\n          <h1><i className='fa fa-file-o' /> {entity.name}</h1>\r\n        </div>\r\n        <div>\r\n          <a className='button confirmation' rel='noreferrer' target='_blank' href={Studio.resolveUrl(`assets/${entity._id}/content?download=true`)} title='Download'>\r\n            <i className='fa fa-download' /> Download\r\n          </a>\r\n          <button className='button confirmation' onClick={() => AssetUploadButton.OpenUpload()}>\r\n            <i className='fa fa-upload' /> Upload\r\n          </button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderEditorToolbar () {\r\n    const { link, previewLoading, previewOpen, helpersActive } = this.state\r\n    const { entity, helpersEntity, displayName, icon, onDownload, onUpload } = this.props\r\n    const lazyPreview = this.getLazyPreviewStatus(entity)\r\n    const previewEnabled = this.getPreviewEnabledStatus(entity)\r\n    const embeddingCode = this.getEmbeddingCode(entity)\r\n\r\n    let visibleName = displayName\r\n\r\n    if (!visibleName && entity) {\r\n      visibleName = entity.name\r\n    }\r\n\r\n    if (!visibleName) {\r\n      visibleName = '<none>'\r\n    }\r\n\r\n    return (\r\n      <div className={style.toolbarContainer}>\r\n        <div className={style.toolbarRow}>\r\n          <h3 className={style.toolbarAssetName}>\r\n            <div>\r\n              <i className={`fa ${icon}`} />\r\n              &nbsp;\r\n              {entity != null ? <a href='#' onClick={(ev) => { ev.preventDefault(); Studio.openTab({ _id: entity._id }) }}>{visibleName}</a> : visibleName}\r\n            </div>\r\n          </h3>\r\n          {embeddingCode !== '' && (\r\n            <CopyToClipboard text={embeddingCode}>\r\n              <a className='button confirmation' title='Copy the embedding code to clipboard'>\r\n                <i className='fa fa-clipboard' />\r\n              </a>\r\n            </CopyToClipboard>\r\n          )}\r\n          {entity != null && (\r\n            <button\r\n              className='button confirmation'\r\n              title='Download'\r\n              onClick={() => {\r\n                if (onDownload) {\r\n                  onDownload(entity)\r\n                } else {\r\n                  const downloadEl = document.createElement('a')\r\n                  downloadEl.target = '_blank'\r\n                  downloadEl.href = Studio.resolveUrl(`assets/${entity._id}/content?download=true`)\r\n                  downloadEl.click()\r\n                }\r\n              }}\r\n            >\r\n              <i className='fa fa-download' />\r\n            </button>\r\n          )}\r\n          {entity != null && !entity.link && (\r\n            <button\r\n              className='button confirmation'\r\n              title='Upload'\r\n              onClick={() => {\r\n                const cb = () => {\r\n                  let wasOpen = false\r\n\r\n                  if (lazyPreview && this.state.previewOpen) {\r\n                    wasOpen = true\r\n                  }\r\n\r\n                  this.clearPreview(() => {\r\n                    if (wasOpen) {\r\n                      this.preview(entity)\r\n                    }\r\n                  })\r\n                }\r\n\r\n                if (onUpload) {\r\n                  onUpload(entity, cb)\r\n                } else {\r\n                  AssetUploadButton.OpenUpload({\r\n                    targetAsset: {\r\n                      _id: entity._id,\r\n                      name: entity.name\r\n                    },\r\n                    uploadCallback: cb\r\n                  })\r\n                }\r\n              }}\r\n            >\r\n              <i className='fa fa-upload' />\r\n            </button>\r\n          )}\r\n          {lazyPreview && entity != null && (\r\n            <button\r\n              className={`button confirmation ${!previewEnabled || previewLoading ? 'disabled' : ''}`}\r\n              onClick={() => this.preview(entity)}\r\n              title={previewOpen ? 'Refresh' : 'Preview'}\r\n            >\r\n              <i className={`fa fa-${previewLoading ? '' : previewOpen ? 'retweet' : 'eye'}`} /> {previewLoading ? 'Loading..' : ''}\r\n            </button>\r\n          )}\r\n          {lazyPreview && entity != null && previewOpen && !previewLoading && (\r\n            <button\r\n              className={`button confirmation ${!previewEnabled || previewLoading ? 'disabled' : ''}`}\r\n              onClick={() => this.clearPreview()}\r\n              title='Clear'\r\n            >\r\n              <i className='fa fa-times' />\r\n            </button>\r\n          )}\r\n          {helpersEntity != null && (\r\n            <button\r\n              className={`button ${helpersActive ? 'danger' : 'confirmation'}`}\r\n              onClick={() => this.setState((state) => {\r\n                const change = {}\r\n\r\n                if (state.helpersActive) {\r\n                  Studio.store.dispatch(Studio.entities.actions.flushUpdates())\r\n                } else {\r\n                  change.previewOpen = false\r\n                  change.previewLoading = false\r\n                  Studio.stopProgress()\r\n                }\r\n\r\n                return { helpersActive: !state.helpersActive, ...change }\r\n              })}\r\n              title={`${helpersActive ? 'Hide' : 'Show'} helpers`}\r\n            >\r\n              <i className='fa fa-code' />\r\n            </button>\r\n          )}\r\n        </div>\r\n        {entity != null && entity.link && (\r\n          <div className={style.toolbarRow} style={{ margin: '0.6rem' }}>\r\n            <span><b><i className='fa fa-folder-open' /> linked to file:</b> {link}</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderEditorContent () {\r\n    const { entity, helpersEntity, emptyMessage, getPreviewContent, onUpdate } = this.props\r\n    const { helpersActive } = this.state\r\n\r\n    if (helpersEntity != null && helpersActive) {\r\n      return (\r\n        <TextEditor\r\n          key={helpersEntity._id + '_helpers'}\r\n          name={helpersEntity._id + '_helpers'}\r\n          getFilename={() => `${helpersEntity.name} (helpers)`}\r\n          mode='javascript'\r\n          onUpdate={(v) => onUpdate(Object.assign({ _id: helpersEntity._id }, { helpers: v }))}\r\n          value={helpersEntity.helpers || ''}\r\n        />\r\n      )\r\n    }\r\n\r\n    if (entity == null) {\r\n      return (\r\n        <div style={{ padding: '2rem' }}>\r\n          <i>{emptyMessage != null ? emptyMessage : 'Asset is empty'}</i>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    const parts = entity.name.split('.')\r\n    const extension = parts[parts.length - 1]\r\n    const lazyPreview = this.getLazyPreviewStatus(entity)\r\n\r\n    let previewOpen = true\r\n\r\n    if (lazyPreview) {\r\n      previewOpen = this.state.previewOpen\r\n    }\r\n\r\n    if (!previewOpen) {\r\n      return null\r\n    }\r\n\r\n    if (getPreviewContent) {\r\n      return getPreviewContent(entity, {\r\n        previewLoadFinish: this.previewLoadFinish\r\n      })\r\n    }\r\n\r\n    if (this.isImage(entity)) {\r\n      return (\r\n        <div style={{ overflow: 'auto' }}>\r\n          <img\r\n            src={Studio.resolveUrl(`assets/${entity._id}/content?v=${new Date().getTime()}`)}\r\n            style={{ display: 'block', margin: '3rem auto' }}\r\n          />\r\n        </div>\r\n      )\r\n    }\r\n\r\n    if (this.isFont(entity)) {\r\n      const newStyle = document.createElement('style')\r\n\r\n      newStyle.appendChild(document.createTextNode(`@font-face {\r\n         font-family: '${parts[0]}';\r\n         src: url('${Studio.resolveUrl(`/assets/${entity._id}/content`)}');\r\n         format('${extension === 'ttf' ? 'truetype' : 'woff'}');\r\n        }`))\r\n\r\n      document.head.appendChild(newStyle)\r\n\r\n      return (\r\n        <div style={{ overflow: 'auto', fontFamily: parts[0], padding: '2rem' }}><h1> Hello world font {entity.name}</h1>\r\n          <p>\r\n            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's\r\n            standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to\r\n            make a type specimen book.\r\n          </p>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    if (this.isPdf(entity)) {\r\n      return (\r\n        <div className='block' style={{ height: '100%' }}>\r\n          <object style={{ height: '100%' }} data={Studio.resolveUrl(`assets/${entity._id}/content?v=${new Date().getTime()}`)} type='application/pdf'>\r\n            <embed src={Studio.resolveUrl(`assets/${entity._id}/content?v=${new Date().getTime()}`)} type='application/pdf' />\r\n          </object>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    if (this.isOfficeFile(entity)) {\r\n      const officeSrc = Studio.resolveUrl(`assets/office/${entity._id}/content`)\r\n\r\n      return (\r\n        <FramePreview\r\n          onLoad={() => this.previewLoadFinish()}\r\n          src={officeSrc}\r\n        />\r\n      )\r\n    }\r\n\r\n    if (entity.name.split('.').length > 1 && binaryExtensions.includes(entity.name.split('.')[1])) {\r\n      return this.renderBinary(entity)\r\n    }\r\n\r\n    let mode = parts[parts.length - 1]\r\n\r\n    if (extension === 'js') {\r\n      mode = 'javascript'\r\n    }\r\n\r\n    if (extension === 'html') {\r\n      mode = 'handlebars'\r\n    }\r\n\r\n    const content = ((entity.content || entity.forceUpdate) ? entity.content : this.state.content) || ''\r\n    let text\r\n    try {\r\n      text = decodeURIComponent(escape(atob(content)))\r\n    } catch (e) {\r\n      return this.renderBinary(entity)\r\n    }\r\n\r\n    return (\r\n      <TextEditor\r\n        name={entity._id}\r\n        mode={mode}\r\n        value={text}\r\n        onUpdate={(v) => this.props.onUpdate(Object.assign({}, entity, { content: btoa(unescape(encodeURIComponent(v))), forceUpdate: true }))}\r\n      />\r\n    )\r\n  }\r\n\r\n  render () {\r\n    const { initialLoading } = this.state\r\n\r\n    if (initialLoading) {\r\n      return <div />\r\n    }\r\n\r\n    return (\r\n      <div className='block'>\r\n        {this.renderEditorToolbar()}\r\n        {this.renderEditorContent()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nAssetEditor.defaultProps = {\r\n  icon: 'fa-file-o'\r\n}\r\n\r\nexport default AssetEditor\r\n","module.exports = Studio.libraries['superagent'];","\"use strict\";\n\nvar _require = require('./Component'),\n    CopyToClipboard = _require.CopyToClipboard;\n\nCopyToClipboard.CopyToClipboard = CopyToClipboard;\nmodule.exports = CopyToClipboard;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CopyToClipboard = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _copyToClipboard = _interopRequireDefault(require(\"copy-to-clipboard\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar CopyToClipboard =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(CopyToClipboard, _React$PureComponent);\n\n  function CopyToClipboard() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CopyToClipboard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CopyToClipboard)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", function (event) {\n      var _this$props = _this.props,\n          text = _this$props.text,\n          onCopy = _this$props.onCopy,\n          children = _this$props.children,\n          options = _this$props.options;\n\n      var elem = _react[\"default\"].Children.only(children);\n\n      var result = (0, _copyToClipboard[\"default\"])(text, options);\n\n      if (onCopy) {\n        onCopy(text, result);\n      } // Bypass onClick if it was present\n\n\n      if (elem && elem.props && typeof elem.props.onClick === 'function') {\n        elem.props.onClick(event);\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(CopyToClipboard, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          _text = _this$props2.text,\n          _onCopy = _this$props2.onCopy,\n          _options = _this$props2.options,\n          children = _this$props2.children,\n          props = _objectWithoutProperties(_this$props2, [\"text\", \"onCopy\", \"options\", \"children\"]);\n\n      var elem = _react[\"default\"].Children.only(children);\n\n      return _react[\"default\"].cloneElement(elem, _objectSpread({}, props, {\n        onClick: this.onClick\n      }));\n    }\n  }]);\n\n  return CopyToClipboard;\n}(_react[\"default\"].PureComponent);\n\nexports.CopyToClipboard = CopyToClipboard;\n\n_defineProperty(CopyToClipboard, \"defaultProps\", {\n  onCopy: undefined,\n  options: undefined\n});","\"use strict\";\n\nvar deselectCurrent = require(\"toggle-selection\");\n\nvar clipboardToIE11Formatting = {\n  \"text/plain\": \"Text\",\n  \"text/html\": \"Url\",\n  \"default\": \"Text\"\n}\n\nvar defaultMessage = \"Copy to clipboard: #{key}, Enter\";\n\nfunction format(message) {\n  var copyKey = (/mac os x/i.test(navigator.userAgent) ? \"\" : \"Ctrl\") + \"+C\";\n  return message.replace(/#{\\s*key\\s*}/g, copyKey);\n}\n\nfunction copy(text, options) {\n  var debug,\n    message,\n    reselectPrevious,\n    range,\n    selection,\n    mark,\n    success = false;\n  if (!options) {\n    options = {};\n  }\n  debug = options.debug || false;\n  try {\n    reselectPrevious = deselectCurrent();\n\n    range = document.createRange();\n    selection = document.getSelection();\n\n    mark = document.createElement(\"span\");\n    mark.textContent = text;\n    // reset user styles for span element\n    mark.style.all = \"unset\";\n    // prevents scrolling to the end of the page\n    mark.style.position = \"fixed\";\n    mark.style.top = 0;\n    mark.style.clip = \"rect(0, 0, 0, 0)\";\n    // used to preserve spaces and line breaks\n    mark.style.whiteSpace = \"pre\";\n    // do not inherit user-select (it may be `none`)\n    mark.style.webkitUserSelect = \"text\";\n    mark.style.MozUserSelect = \"text\";\n    mark.style.msUserSelect = \"text\";\n    mark.style.userSelect = \"text\";\n    mark.addEventListener(\"copy\", function(e) {\n      e.stopPropagation();\n      if (options.format) {\n        e.preventDefault();\n        if (typeof e.clipboardData === \"undefined\") { // IE 11\n          debug && console.warn(\"unable to use e.clipboardData\");\n          debug && console.warn(\"trying IE specific stuff\");\n          window.clipboardData.clearData();\n          var format = clipboardToIE11Formatting[options.format] || clipboardToIE11Formatting[\"default\"]\n          window.clipboardData.setData(format, text);\n        } else { // all other browsers\n          e.clipboardData.clearData();\n          e.clipboardData.setData(options.format, text);\n        }\n      }\n      if (options.onCopy) {\n        e.preventDefault();\n        options.onCopy(e.clipboardData);\n      }\n    });\n\n    document.body.appendChild(mark);\n\n    range.selectNodeContents(mark);\n    selection.addRange(range);\n\n    var successful = document.execCommand(\"copy\");\n    if (!successful) {\n      throw new Error(\"copy command was unsuccessful\");\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error(\"unable to copy using execCommand: \", err);\n    debug && console.warn(\"trying IE specific stuff\");\n    try {\n      window.clipboardData.setData(options.format || \"text\", text);\n      options.onCopy && options.onCopy(window.clipboardData);\n      success = true;\n    } catch (err) {\n      debug && console.error(\"unable to copy using clipboardData: \", err);\n      debug && console.error(\"falling back to prompt\");\n      message = format(\"message\" in options ? options.message : defaultMessage);\n      window.prompt(message, text);\n    }\n  } finally {\n    if (selection) {\n      if (typeof selection.removeRange == \"function\") {\n        selection.removeRange(range);\n      } else {\n        selection.removeAllRanges();\n      }\n    }\n\n    if (mark) {\n      document.body.removeChild(mark);\n    }\n    reselectPrevious();\n  }\n\n  return success;\n}\n\nmodule.exports = copy;\n","\nmodule.exports = function () {\n  var selection = document.getSelection();\n  if (!selection.rangeCount) {\n    return function () {};\n  }\n  var active = document.activeElement;\n\n  var ranges = [];\n  for (var i = 0; i < selection.rangeCount; i++) {\n    ranges.push(selection.getRangeAt(i));\n  }\n\n  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML\n    case 'INPUT':\n    case 'TEXTAREA':\n      active.blur();\n      break;\n\n    default:\n      active = null;\n      break;\n  }\n\n  selection.removeAllRanges();\n  return function () {\n    selection.type === 'Caret' &&\n    selection.removeAllRanges();\n\n    if (!selection.rangeCount) {\n      ranges.forEach(function(range) {\n        selection.addRange(range);\n      });\n    }\n\n    active &&\n    active.focus();\n  };\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbarContainer\":\"x-assets-AssetEditor-toolbarContainer\",\"toolbarRow\":\"x-assets-AssetEditor-toolbarRow\",\"toolbarAssetName\":\"x-assets-AssetEditor-toolbarAssetName\"};","import React, { Component } from 'react'\r\nimport scopeOptions from './scopeOptions'\r\nimport AssetUploadButton from './AssetUploadButton'\r\nimport Studio from 'jsreport-studio'\r\n\r\nclass NewAssetModal extends Component {\r\n  constructor () {\r\n    super()\r\n\r\n    this.nameRef = React.createRef()\r\n    this.linkRef = React.createRef()\r\n    this.state = { isLink: false, isSharedHelper: false, scope: null }\r\n  }\r\n\r\n  handleKeyPress (e) {\r\n    if (e.key === 'Enter') {\r\n      this.createAsset()\r\n    }\r\n  }\r\n\r\n  // the modal component for some reason after open focuses the panel itself\r\n  componentDidMount () {\r\n    setTimeout(() => this.nameRef.current.focus(), 0)\r\n  }\r\n\r\n  async createAsset (e) {\r\n    let entity = {}\r\n\r\n    if (!this.state.isLink && (!this.nameRef.current.value || this.nameRef.current.value.indexOf('.')) < 0) {\r\n      return this.setState({ error: 'name should include file extension, for example foo.js' })\r\n    }\r\n\r\n    if (this.props.options.defaults != null) {\r\n      entity = Object.assign(entity, this.props.options.defaults)\r\n    }\r\n\r\n    if (this.state.isLink) {\r\n      entity.link = this.linkRef.current.value\r\n      const fragments = entity.link.split('/')\r\n      entity.name = fragments[fragments.length - 1]\r\n    } else {\r\n      entity.name = this.nameRef.current.value\r\n    }\r\n\r\n    if (this.state.isSharedHelper) {\r\n      entity.sharedHelpersScope = this.state.scope\r\n    } else {\r\n      entity.sharedHelpersScope = null\r\n    }\r\n\r\n    try {\r\n      if (Studio.workspaces) {\r\n        await Studio.workspaces.save()\r\n      }\r\n\r\n      const response = await Studio.api.post('/odata/assets', {\r\n        data: entity\r\n      })\r\n      response.__entitySet = 'assets'\r\n\r\n      Studio.addExistingEntity(response)\r\n      Studio.openTab(response, this.props.options.activateNewTab)\r\n\r\n      if (this.props.options.onNewEntity) {\r\n        this.props.options.onNewEntity(response)\r\n      }\r\n\r\n      this.props.close()\r\n    } catch (e) {\r\n      this.setState({ error: e.message })\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const { isLink, isSharedHelper, scope, error } = this.state\r\n\r\n    const currentScopeValue = scope != null ? scope : 'global'\r\n    const currentScopeOption = scopeOptions.find((opt) => opt.value === currentScopeValue)\r\n\r\n    return (\r\n      <div>\r\n        <div className='form-group'>\r\n          <label>New asset</label>\r\n        </div>\r\n        {isLink\r\n          ? (\r\n            <div className='form-group'>\r\n              <label>relative or absolute path to existing file</label>\r\n              <input\r\n                type='text'\r\n                name='link'\r\n                ref={this.linkRef}\r\n              />\r\n            </div>\r\n            )\r\n          : (\r\n            <div className='form-group'>\r\n              <label>name</label>\r\n              <input\r\n                type='text'\r\n                name='name'\r\n                ref={this.nameRef}\r\n                placeholder='styles.css'\r\n                onKeyPress={(e) => this.handleKeyPress(e)}\r\n              />\r\n            </div>\r\n            )}\r\n        {Studio.extensions.assets.options.allowAssetsLinkedToFiles !== false\r\n          ? (\r\n            <div className='form-group'>\r\n              <label>link to existing file</label>\r\n              <input\r\n                type='checkbox' checked={isLink}\r\n                onChange={() => this.setState({ isLink: !isLink })}\r\n              />\r\n            </div>\r\n            )\r\n          : <div />}\r\n        <div className='form-group'>\r\n          <label>shared helpers attached to templates</label>\r\n          <input\r\n            type='checkbox' checked={isSharedHelper === true}\r\n            onChange={(v) => {\r\n              this.setState({\r\n                isSharedHelper: v.target.checked,\r\n                scope: v.target.checked === false ? null : 'global'\r\n              })\r\n            }}\r\n          />\r\n        </div>\r\n        {isSharedHelper && (\r\n          <div className='form-group'>\r\n            <label>scope</label>\r\n            <select\r\n              value={currentScopeValue}\r\n              onChange={(v) => {\r\n                const newScope = v.target.value\r\n                this.setState({\r\n                  scope: newScope\r\n                })\r\n              }}\r\n            >\r\n              {scopeOptions.map((opt) => (\r\n                <option key={opt.key} value={opt.value} title={opt.desc}>{opt.title}</option>\r\n              ))}\r\n            </select>\r\n            <em>{currentScopeOption.desc}</em>\r\n          </div>\r\n        )}\r\n        <div className='form-group'>\r\n          <span\r\n            style={{ color: 'red', display: error ? 'block' : 'none' }}\r\n          >{error}\r\n          </span>\r\n        </div>\r\n        <div className='form-group' style={{ opacity: 0.8 }}>\r\n          <hr />\r\n          <span>You can use assets to embed any kind of static content into report template.<br />\r\n            This can be for example css style, image, font, html or even javascript shared helpers. <br />See the\r\n            <a target='_blank' rel='noreferrer' title='Help' href='http://jsreport.net/learn/assets'>documentation</a> for details.\r\n          </span>\r\n        </div>\r\n        <div className='button-bar'>\r\n          <button\r\n            className='button confirmation'\r\n            onClick={() => {\r\n              this.props.close()\r\n              AssetUploadButton.OpenUploadNew(this.props.options.defaults, {\r\n                activateNewTab: this.props.options.activateNewTab,\r\n                onNewEntityCallback: this.props.options.onNewEntity\r\n              })\r\n            }}\r\n          >Upload\r\n          </button>\r\n          <button onClick={() => this.createAsset()} className='button confirmation'>Ok</button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default NewAssetModal\r\n","import React, { Component } from 'react'\r\nimport scopeOptions from './scopeOptions'\r\nimport Studio from 'jsreport-studio'\r\n\r\nclass AssetProperties extends Component {\r\n  static title (entity, entities) {\r\n    let suffix = entity.link ? ' (link)' : ''\r\n\r\n    if (entity.sharedHelpersScope != null) {\r\n      suffix += ` (shared helper, scope: ${entity.sharedHelpersScope})`\r\n    }\r\n\r\n    return `asset${suffix}`\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.normalizeScope()\r\n  }\r\n\r\n  componentDidUpdate () {\r\n    this.normalizeScope()\r\n  }\r\n\r\n  normalizeScope () {\r\n    const { entity, onChange } = this.props\r\n\r\n    if (entity.isSharedHelper === true && entity.sharedHelpersScope == null) {\r\n      onChange({ _id: entity._id, sharedHelpersScope: 'global', isSharedHelper: false })\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const { entity, onChange } = this.props\r\n\r\n    const currentScopeValue = entity.sharedHelpersScope != null ? entity.sharedHelpersScope : 'global'\r\n    const currentScopeOption = scopeOptions.find((opt) => opt.value === currentScopeValue)\r\n\r\n    return (\r\n      <div>\r\n        {Studio.extensions.assets.options.allowAssetsLinkedToFiles !== false\r\n          ? (\r\n            <div className='form-group'>\r\n              <label>link</label>\r\n              <input\r\n                type='text'\r\n                value={entity.link || ''}\r\n                onChange={(v) => onChange({ _id: entity._id, link: v.target.value })}\r\n              />\r\n            </div>\r\n            )\r\n          : <div />}\r\n        <div className='form-group'>\r\n          <label>shared helpers attached to templates</label>\r\n          <input\r\n            type='checkbox' checked={entity.sharedHelpersScope != null}\r\n            onChange={(v) => {\r\n              onChange({\r\n                _id: entity._id,\r\n                sharedHelpersScope: v.target.checked === false ? null : 'global'\r\n              })\r\n            }}\r\n          />\r\n        </div>\r\n        {entity.sharedHelpersScope != null && (\r\n          <div className='form-group'>\r\n            <label>scope</label>\r\n            <select\r\n              value={currentScopeValue}\r\n              onChange={(v) => {\r\n                const newScope = v.target.value\r\n                onChange({ _id: entity._id, sharedHelpersScope: newScope })\r\n              }}\r\n            >\r\n              {scopeOptions.map((opt) => (\r\n                <option key={opt.key} value={opt.value} title={opt.desc}>{opt.title}</option>\r\n              ))}\r\n            </select>\r\n            <em>{currentScopeOption.desc}</em>\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default AssetProperties\r\n"],"sourceRoot":""}